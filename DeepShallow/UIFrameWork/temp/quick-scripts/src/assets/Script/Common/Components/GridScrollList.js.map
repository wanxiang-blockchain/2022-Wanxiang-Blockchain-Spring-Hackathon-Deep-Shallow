{"version":3,"sources":["assets/Script/Common/Components/GridScrollList.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { ScrollViewHelper, ScrollViewElementProxy } from \"../../Common/Components/ScrollViewHelper\";\n\nconst {ccclass, property} = cc._decorator;\n\nenum RowDirection {\n    LeftToRight,\n    TopToBottom\n}\n\n@ccclass\nexport class GridScrollList extends cc.Component {\n    public allProxy : ScrollViewElementProxy[] = [];\n    @property(ScrollViewHelper)\n    public scrollHelper:ScrollViewHelper = null;\n    @property({type:cc.Enum(RowDirection)})\n    private rowDirection:RowDirection = RowDirection.LeftToRight;\n    @property()\n    private colSpace : number = 10;\n    @property()\n    private rowSpace : number = 10;\n    @property()\n    private colCount : number = 3;\n    @property()\n    private margin : number = 10;\n\n    public doLayout() {\n        this._layoutItems();\n    }\n\n    private _layoutItems() {\n        this.scrollHelper.clearData();\n        let data = this.allProxy;\n        let elemSize = data.length?data[0].region.size:cc.size(0, 0);\n        let xSpace = this.colSpace;\n        let ySpace = this.rowSpace;\n        let colCount = this.colCount;\n        let viewSize = this.scrollHelper.scrollView.node.getContentSize();\n        if(this.rowDirection == RowDirection.TopToBottom) {\n            let temp = viewSize.width;\n            viewSize.width = viewSize.height;\n            viewSize.height = temp;\n            temp = elemSize.width;\n            elemSize.width = elemSize.height;\n            elemSize.height = temp;\n        }\n        let yMargin = this.margin;\n        let xMargin = (viewSize.width - (colCount * elemSize.width + (colCount - 1) * xSpace)) / 2;\n        \n\n        let x = xMargin;\n        let y = - yMargin + ySpace + elemSize.height;\n        let dy = -ySpace - elemSize.height;\n        let dx = xSpace + elemSize.width;\n        if(this.rowDirection == RowDirection.TopToBottom) {\n            dy = ySpace + elemSize.height;\n            dx = -xSpace - elemSize.width;\n            y = yMargin - dy;\n        }\n        for(let i = 0; i < data.length; i++) {\n            x += dx;\n            if(i % colCount == 0) {\n                y += dy;\n                x = xMargin;\n            }\n            let proxy = data[i];\n            if(this.rowDirection == RowDirection.LeftToRight) {\n                proxy.region.origin = cc.v2(x, y - elemSize.height);\n            } else {\n                proxy.region.origin = cc.v2(y, x - elemSize.height);\n            }\n            this.scrollHelper.addData(proxy);\n        }\n        if(this.rowDirection == RowDirection.LeftToRight) {\n            this.scrollHelper.scrollView.content.setContentSize(viewSize.width, -y + elemSize.height + yMargin);\n        } else {\n            this.scrollHelper.scrollView.content.setContentSize(y + elemSize.height + yMargin, viewSize.width);\n        }\n    }\n}"]}
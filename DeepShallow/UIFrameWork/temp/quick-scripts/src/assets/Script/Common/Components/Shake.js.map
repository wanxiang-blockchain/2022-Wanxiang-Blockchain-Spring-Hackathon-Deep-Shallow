{"version":3,"sources":["assets/Script/Common/Components/Shake.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAmC,yBAAiB;IAApD;QAAA,qEAiDC;QA9CW,gBAAU,GAAY,CAAC,CAAC;QACxB,gBAAU,GAAY,CAAC,CAAC;QACxB,iBAAW,GAAW,CAAC,CAAC;QACxB,iBAAW,GAAW,CAAC,CAAC;;IA2CpC,CAAC;cAjDoB,KAAK;IAQtB;;;;;;OAMG;IACW,YAAM,GAApB,UAAqB,QAAe,EAAC,UAAiB,EAAC,UAAiB;QACpE,IAAI,GAAG,GAAS,IAAI,OAAK,EAAE,CAAC;QAC5B,GAAG,CAAC,gBAAgB,CAAC,QAAQ,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC;QACvD,OAAO,GAAG,CAAC;IACf,CAAC;IAEM,gCAAgB,GAAvB,UAAwB,QAAe,EAAC,UAAiB,EAAC,UAAiB;QACvE,EAAE,CAAC,cAAc,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,IAAI,EAAC,SAAS,CAAC,CAAC;QACtE,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAC9B,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAC9B,OAAO,IAAI,CAAC;IAChB,CAAC;IAEM,2BAAW,GAAlB,UAAmB,GAAU,EAAC,GAAU;QACpC,IAAI,GAAG,GAAU,IAAI,CAAC,MAAM,EAAE,CAAC;QAC/B,OAAO,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;IACnC,CAAC;IAEM,sBAAM,GAAb,UAAc,IAAW;QACrB,IAAI,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,WAAW,EAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACjE,IAAI,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,WAAW,EAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACjE,IAAI,CAAC,SAAS,EAAE,CAAC,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,EAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;IAClF,CAAC;IAEM,+BAAe,GAAtB,UAAuB,MAAc;QACjC,EAAE,CAAC,cAAc,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC,KAAK,CAAC,IAAI,EAAC,SAAS,CAAC,CAAC;QACrE,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,CAAC,CAAC;QAC3B,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,CAAC,CAAC;IAC/B,CAAC;IAEM,oBAAI,GAAX;QACI,IAAI,CAAC,SAAS,EAAE,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;QAC3E,EAAE,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;IACpD,CAAC;;IAhDgB,KAAK;QADzB,OAAO;OACa,KAAK,CAiDzB;IAAD,YAAC;CAjDD,AAiDC,CAjDkC,EAAE,CAAC,cAAc,GAiDnD;kBAjDoB,KAAK","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\n \n@ccclass\nexport default class Shake extends cc.ActionInterval\n{\n \n    private _initial_x : number = 0;\n    private _initial_y : number = 0;\n    private _strength_x: number = 0;\n    private _strength_y: number = 0;\n \n    /**\n     *  创建抖动动画\n     * @param {number} duration     动画持续时长\n     * @param {number} strength_x   抖动幅度： x方向\n     * @param {number} strength_y   抖动幅度： y方向\n     * @returns {Shake}\n     */\n    public static create(duration:number,strength_x:number,strength_y:number): Shake {\n        let act:Shake = new Shake();\n        act.initWithDuration(duration, strength_x, strength_y);\n        return act;\n    }\n \n    public initWithDuration(duration:number,strength_x:number,strength_y:number) {\n        cc.ActionInterval.prototype['initWithDuration'].apply(this,arguments);\n        this._strength_x = strength_x;\n        this._strength_y = strength_y;\n        return true;\n    }\n \n    public fgRangeRand(min:number,max:number) {\n        let rnd:number = Math.random();\n        return rnd * (max - min) + min;\n    }\n \n    public update(time:number) {\n        let randx = this.fgRangeRand(-this._strength_x,this._strength_x);\n        let randy = this.fgRangeRand(-this._strength_y,this._strength_y);\n        this.getTarget().setPosition(randx + this._initial_x,randy + this._initial_y);\n    }\n \n    public startWithTarget(target:cc.Node) {\n        cc.ActionInterval.prototype['startWithTarget'].apply(this,arguments);\n        this._initial_x = target.x;\n        this._initial_y = target.y;\n    }\n \n    public stop() {\n        this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y));\n        cc.ActionInterval.prototype['stop'].apply(this);\n    }\n}"]}
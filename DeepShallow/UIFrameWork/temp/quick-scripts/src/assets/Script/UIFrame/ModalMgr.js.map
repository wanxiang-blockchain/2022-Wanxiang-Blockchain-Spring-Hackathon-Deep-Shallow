{"version":3,"sources":["assets/Script/UIFrame/ModalMgr.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,gDAA+C;AAC/C,iDAA4C;AAI5C;;GAEG;AACG,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAsC,4BAAY;IAAlD;QAAA,qEA2CC;QAzBW,aAAO,GAAiB,IAAI,CAAC;;IAyBzC,CAAC;iBA3CoB,QAAQ;IAGzB,sBAAkB,gBAAI;aAAtB;YACI,IAAG,IAAI,CAAC,KAAK,IAAI,IAAI,EAAE;gBACnB,IAAI,CAAC,KAAK,GAAG,IAAI,UAAQ,EAAE,CAAC;gBAE5B,IAAI,IAAI,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;gBACtC,UAAQ,CAAC,SAAS,GAAG,qBAAS,CAAC,eAAe,GAAG,GAAG,GAAG,qBAAS,CAAC,cAAc,CAAA;gBAE/E,IAAI,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,UAAQ,CAAC,SAAS,CAAC,CAAC;gBAC3C,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBACxB,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,uBAAa,CAAC,CAAC;gBACtD,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;aAC7B;YACD,OAAO,IAAI,CAAC,KAAK,CAAC;QACtB,CAAC;;;OAAA;IAID,gBAAgB;IACF,4BAAS,GAAvB,UAAwB,QAAmB;;;;4BACvC,qBAAM,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,OAAO,EAAE,QAAQ,CAAC,UAAU,EAAE,QAAQ,CAAC,QAAQ,EAAE,QAAQ,CAAC,QAAQ,CAAC,EAAA;;wBAAzG,SAAyG,CAAC;;;;;KAC7G;IAEM,mCAAgB,GAAvB,UAAwB,IAAgB;QACpC,IAAG,IAAI,CAAC,MAAM,IAAI,CAAC,EAAE;YACjB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACjC,OAAQ;SACX;QACD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QAChC,IAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE;YACzB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;SACxC;QACD,KAAI,IAAI,CAAC,GAAC,IAAI,CAAC,MAAM,GAAC,CAAC,EAAE,CAAC,IAAE,CAAC,EAAE,CAAC,EAAE,EAAE;YAChC,IAAG,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,OAAO,GAAG,CAAC,EAAE;gBAC9B,EAAE,CAAC,IAAI,CAAC,UAAQ,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBAC5F,IAAI,CAAC,OAAO,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;gBAC/B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;gBAClC,MAAM;aACT;SACJ;IACL,CAAC;;IAzCa,kBAAS,GAAG,EAAE,CAAC;IACf,cAAK,GAAa,IAAI,CAAC;IAFpB,QAAQ;QAD5B,OAAO;OACa,QAAQ,CA2C5B;IAAD,eAAC;CA3CD,AA2CC,CA3CqC,EAAE,CAAC,SAAS,GA2CjD;kBA3CoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["\nimport { SysDefine } from \"./config/SysDefine\";\nimport UIModalScript from \"./UIModalScript\";\nimport { ModalType } from \"./Struct\";\nimport { UIWindow } from \"./UIForm\";\n\n/**\n * 遮罩管理\n */\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class ModalMgr extends cc.Component {\n    public static popUpRoot = '';\n    public static _inst: ModalMgr = null;\n    public static get inst() {\n        if(this._inst == null) {\n            this._inst = new ModalMgr();\n\n            let node = new cc.Node(\"UIModalNode\");\n            ModalMgr.popUpRoot = SysDefine.SYS_UIROOT_NAME + '/' + SysDefine.SYS_POPUP_NODE\n\n            let rootNode = cc.find(ModalMgr.popUpRoot);\n            rootNode.addChild(node);\n            this._inst.uiModal = node.addComponent(UIModalScript);\n            this._inst.uiModal.init();\n        }\n        return this._inst;\n    }\n\n    private uiModal:UIModalScript = null;\n\n    /** 为mask添加颜色 */\n    private async showModal(maskType: ModalType) {\n        await this.uiModal.showModal(maskType.opacity, maskType.easingTime, maskType.isEasing, maskType.dualBlur);\n    }\n\n    public checkModalWindow(coms: UIWindow[]) {\n        if(coms.length <= 0) {\n            this.uiModal.node.active = false;\n            return ;\n        }\n        this.uiModal.node.active = true;\n        if(this.uiModal.node.parent) {\n            this.uiModal.node.removeFromParent();\n        }\n        for(let i=coms.length-1; i>=0; i--) {\n            if(coms[i].modalType.opacity > 0) {\n                cc.find(ModalMgr.popUpRoot).addChild(this.uiModal.node, Math.max(coms[i].node.zIndex-1, 0));\n                this.uiModal.fid = coms[i].fid;\n                this.showModal(coms[i].modalType);\n                break;\n            }\n        }   \n    }\n}\n\n"]}
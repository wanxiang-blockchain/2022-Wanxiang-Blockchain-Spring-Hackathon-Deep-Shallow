{"version":3,"sources":["assets/Script/UIScript/UIScrollPlus.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { ScrollViewElementProxy, ScrollViewHelper } from \"../Common/Components/ScrollViewHelper\";\nimport { ModalOpacity } from \"../UIFrame/config/SysDefine\";\nimport { ModalType } from \"../UIFrame/Struct\";\nimport { UIWindow } from \"../UIFrame/UIForm\";\n\nconst {ccclass, property} = cc._decorator;\n\nexport class ScrollPlusProxy extends ScrollViewElementProxy {\n    lab: number;\n}\n\n@ccclass\nexport default class UIScrollPlus extends UIWindow {\n\n    @property(ScrollViewHelper) scrollHelper: ScrollViewHelper = null;\n\n    @property(cc.Prefab) pfItem: cc.Prefab = null;\n\n    modalType = new ModalType(ModalOpacity.OpacityHalf, true)\n    \n    private _nodePool = new cc.NodePool();\n    // onLoad () {}\n\n    start () {\n        this.layoutItems();\n\n        this.scrollHelper.onAllocUI = (proxy: ScrollPlusProxy) => {\n            let ui = this._nodePool.get() || cc.instantiate(this.pfItem)\n            proxy.ui = ui;\n            ui.parent = this.scrollHelper.scrollView.content;\n            ui.setPosition(proxy.region.x, proxy.region.y);\n            proxy.ui.getChildByName('lab').getComponent(cc.Label).string = '' + proxy.lab;\n        }\n        this.scrollHelper.onFreeUI = (proxy: ScrollViewElementProxy) => {\n            this._nodePool.put(proxy.ui);\n            proxy.ui = null;\n        }\n        this.scrollHelper.isUIPooled = () => {\n            return this._nodePool.size() > 0;\n        }\n        this.scrollHelper.checkUI();\n    }\n\n\n\n    private layoutItems() {\n        let d = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15];\n        this.scrollHelper.clearData();\n        let ypos = 0;\n        for(let i=0; i<d.length; i++) {\n            let proxy = new ScrollPlusProxy();\n            proxy.lab = d[i];\n            proxy.region = cc.rect(-this.pfItem.data.width/2, ypos-this.pfItem.data.height, this.pfItem.data.width, this.pfItem.data.height);\n            this.scrollHelper.addData(proxy);\n            ypos -= this.pfItem.data.height + 10;\n        }\n        this.scrollHelper.scrollView.content.height = (this.pfItem.data.height + 10) * d.length;\n    }\n\n    // update (dt) {}\n}\n"]}
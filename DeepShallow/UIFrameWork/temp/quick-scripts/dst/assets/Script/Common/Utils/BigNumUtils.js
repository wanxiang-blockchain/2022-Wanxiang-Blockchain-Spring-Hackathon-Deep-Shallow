
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Common/Utils/BigNumUtils.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'c4b72NccXhGKofOUM3hVrvP', 'BigNumUtils');
// Script/Common/Utils/BigNumUtils.ts

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RountType = void 0;
var RountType;
(function (RountType) {
    RountType[RountType["Round"] = 0] = "Round";
    RountType[RountType["Floor"] = 1] = "Floor";
    RountType[RountType["Ceil"] = 2] = "Ceil";
})(RountType = exports.RountType || (exports.RountType = {}));
var BigNumUtils = /** @class */ (function () {
    function BigNumUtils() {
    }
    BigNumUtils.BNPlus = function () {
        var args = [];
        for (var _a = 0; _a < arguments.length; _a++) {
            args[_a] = arguments[_a];
        }
        var value = [0, 0];
        for (var _i = 0; _i < args.length; _i++) {
            var arg = args[_i];
            var base, zeroes;
            var num = +arg;
            if (num === 0 || (num && num !== Infinity)) {
                zeroes = arg < 10 ? 0 : Math.floor(Math.log10(+arg) + 1e-6);
                base = arg < 10 ? arg : arg / Math.pow(10, zeroes);
            }
            else {
                if (arg) {
                    arg = arg.split("e");
                    base = +arg[0] || 0;
                    zeroes = +arg[1] || 0;
                }
                else {
                    base = 0;
                    zeroes = 0;
                }
            }
            if (zeroes > value[1]) {
                value[0] /= Math.pow(10, zeroes - value[1]);
                value[0] += base;
                value[1] = zeroes;
            }
            else {
                value[0] += base / Math.pow(10, value[1] - zeroes);
            }
        }
        var sign = value[0] >= 0 ? 1 : -1;
        var rbase = Math.abs(value[0]);
        while (rbase < 1 && value[1] > 0) {
            rbase *= 10;
            value[1] -= 1;
        }
        while (rbase > 10) {
            rbase /= 10;
            value[1] += 1;
        }
        rbase *= sign;
        return rbase + "e" + value[1];
    };
    BigNumUtils.BNMinus = function () {
        var args = [];
        for (var _a = 0; _a < arguments.length; _a++) {
            args[_a] = arguments[_a];
        }
        var value = [0, 0];
        for (var _i = 0; _i < args.length; _i++) {
            var arg = args[_i];
            var idx = _i;
            var base, zeroes;
            var num = +arg;
            if (num === 0 || (num && num !== Infinity)) {
                zeroes = arg < 10 ? 0 : Math.floor(Math.log10(+arg) + 1e-6);
                base = arg < 10 ? arg : arg / Math.pow(10, zeroes);
            }
            else {
                arg = arg.split("e");
                base = +arg[0];
                zeroes = +arg[1];
            }
            if (!idx) {
                value[0] = base;
                value[1] = zeroes;
            }
            else {
                if (value[1] < zeroes) {
                    value[0] = value[0] / Math.pow(10, zeroes - value[1]) - base;
                    value[1] = zeroes;
                }
                else {
                    value[0] -= base / Math.pow(10, value[1] - zeroes);
                }
            }
        }
        // if(value[0] <= 1e-10){
        //   return 0;
        // }
        var sign = value[0] >= 0 ? 1 : -1;
        var rbase = Math.abs(value[0]);
        while (rbase < 1 && value[1] > 0) {
            rbase *= 10;
            value[1] -= 1;
        }
        while (rbase > 10) {
            rbase /= 10;
            value[1] += 1;
        }
        rbase *= sign;
        return rbase + "e" + value[1];
    };
    BigNumUtils.BNTimes = function () {
        var args = [];
        for (var _a = 0; _a < arguments.length; _a++) {
            args[_a] = arguments[_a];
        }
        var value = [0, 0];
        args.forEach(function (arg, idx) {
            var base, zeroes;
            var num = +arg;
            if (num === 0 || (num && num !== Infinity)) {
                zeroes = arg < 10 ? 0 : Math.floor(Math.log10(+arg) + 1e-6);
                base = arg < 10 ? arg : arg / Math.pow(10, zeroes);
            }
            else {
                if (arg) {
                    arg = arg.split("e");
                    base = +arg[0] || 0;
                    zeroes = +arg[1] || 0;
                }
                else {
                    base = 1;
                    zeroes = 0;
                }
            }
            if (!idx) {
                value[0] = base;
                value[1] = zeroes;
            }
            else {
                value[0] *= base;
                value[1] += zeroes;
                if (value[0] > 1e300) {
                    value[0] /= 1e300;
                    value[1] += 300;
                }
            }
        });
        var sign = value[0] >= 0 ? 1 : -1;
        var base = Math.abs(value[0]);
        while (base < 1 && value[1] > 0) {
            base *= 10;
            value[1] -= 1;
        }
        while (base > 10) {
            base /= 10;
            value[1] += 1;
        }
        return base * sign + "e" + value[1];
    };
    BigNumUtils.BNDevide = function (value0, value1) {
        if (+value1 === 0) {
            return 0;
        }
        var value = [0, 0];
        var sign = 1;
        [value0, value1].forEach(function (arg, idx) {
            var base, zeroes;
            var realNum = +arg;
            var num = Math.abs(realNum);
            if (num === 0 || (num && num !== Infinity)) {
                zeroes = num < 10 ? 0 : Math.floor(Math.log10(num) + 1e-6);
                base = num < 10 ? num : num / Math.pow(10, zeroes);
            }
            else {
                arg = arg.split("e");
                realNum = +arg[0];
                base = Math.abs(realNum);
                zeroes = +arg[1];
            }
            sign *= realNum >= 0 ? 1 : -1;
            if (idx === 0) {
                value[0] = base;
                value[1] = zeroes;
            }
            else {
                value[0] /= base;
                value[1] -= zeroes;
            }
        });
        var base = Math.abs(value[0]);
        while (base < 1 && value[1] > 0) {
            base *= 10;
            value[1] -= 1;
        }
        while (base > 10) {
            base /= 10;
            value[1] += 1;
        }
        base *= sign;
        if (value[1] < 100) {
            return base * Math.pow(10, value[1]);
        }
        return this.BNTimes(base, this.BNPow(10, value[1]));
    };
    BigNumUtils.BNCompare = function (value0, value1) {
        var bases = [0, 0];
        var zeroes = [0, 0];
        [value0, value1].forEach(function (arg, idx) {
            var num = +arg;
            if (num === 0 || (num && num !== Infinity)) {
                zeroes[idx] = arg < 10 ? 0 : Math.floor(Math.log10(+arg) + 1e-6);
                bases[idx] = arg < 10 ? arg : arg / Math.pow(10, zeroes[idx]);
            }
            else {
                arg = arg.split("e");
                bases[idx] = +arg[0];
                zeroes[idx] = +arg[1];
            }
        });
        return bases[0] * bases[1] < 0 ? (bases[0] > 0 ? 1 : -1) : zeroes[1] > zeroes[0] ? -1 : zeroes[1] < zeroes[0] ? 1 : bases[1] > bases[0] ? -1 : bases[1] < bases[0] ? 1 : 0;
    };
    BigNumUtils.BNPow = function (di, zhi) {
        if (!di) {
            return "0";
        }
        if (!zhi) {
            return "1";
        }
        var max = Math.floor(Math.log(1e300) / Math.log(di));
        max = Math.max(max, 1);
        var val = 1;
        if (max >= zhi) {
            val = Math.pow(di, zhi);
        }
        else {
            var times = Math.floor(zhi / max);
            var arr = [];
            var mid = Math.pow(di, max);
            for (var i = 0; i < times; i++) {
                arr.push(mid);
            }
            arr.push(Math.pow(di, zhi - max * times));
            val = this.BNTimes.apply(this, arr);
        }
        return val;
    };
    BigNumUtils.BNMax = function (value0, value1) {
        return this.BNCompare(value0, value1) > 0 ? value0 : value1;
    };
    BigNumUtils.BNMin = function (value0, value1) {
        return this.BNCompare(value0, value1) > 0 ? value1 : value0;
    };
    BigNumUtils.BNLog = function (value) {
        var num = +value;
        if (num === 0 || (num && num !== Infinity)) {
            var sign = num >= 0 ? 1 : -1;
            num = Math.abs(num);
            return sign * Math.log10(num);
        }
        else {
            return +value.split("e")[1];
        }
    };
    BigNumUtils.BNSqrt = function (value) {
        var num = +value;
        if (num === 0 || (num && num !== Infinity)) {
            return Math.sqrt(num);
        }
        var arr = value.split("e");
        var a = +arr[0];
        var b = +arr[1];
        return Math.sqrt(a) + "e" + b / 2;
    };
    BigNumUtils.BNSqrtEx = function (value, zhi) {
        var num = +value;
        if (num === 0 || (num && num !== Infinity)) {
            return Math.pow(num, 1 / zhi);
        }
        var arr = value.split("e");
        var a = +arr[0];
        var b = +arr[1];
        return Math.pow(a, 1 / zhi) + "e" + b / zhi;
    };
    BigNumUtils.BNFloor = function (value) {
        var num = +value;
        if (num === 0 || (num && num !== Infinity)) {
            return Math.floor(num);
        }
        return value;
    };
    BigNumUtils.BNCeil = function (value) {
        var num = +value;
        if (num === 0 || (num && num !== Infinity)) {
            return Math.ceil(num);
        }
        return value;
    };
    BigNumUtils.BNRound = function (value) {
        var num = +value;
        if (num === 0 || (num && num !== Infinity)) {
            return Math.round(num);
        }
        return value;
    };
    BigNumUtils.BN2Number = function (value) {
        var num = +value;
        if (num === 0 || (num && num !== Infinity)) {
            return num;
        }
        else {
            var arr = value.split("e");
            return +arr[0] * Math.pow(10, arr[1]);
        }
    };
    BigNumUtils.getOwnString = function (n) {
        return this.getNumberString(n, undefined, undefined, RountType.Floor);
    };
    BigNumUtils.getCostString = function (n) {
        return this.getNumberString(n, undefined, undefined, RountType.Ceil);
    };
    BigNumUtils.getNumberString = function (n, fixed, bigFixed, roundType) {
        if (fixed === void 0) { fixed = 0; }
        if (roundType === void 0) { roundType = RountType.Round; }
        var _base;
        var tailIdx;
        var num = +n;
        if (num === 0 || (num && num !== Infinity)) {
            if (n < 1000) {
                return this.roundNum(n, roundType, fixed);
            }
            var base = "" + Math.round(n);
            var digit = 0;
            if (~base.indexOf("e")) {
                //fix bug Math.log10(9.999999999999996e+38)=39
                var dishu = +base.split("e")[0];
                var zhishu = +base.split("e")[1];
                zhishu += Math.floor(Math.log10(dishu));
                digit = zhishu;
            }
            else {
                digit = Math.floor(Math.log10(n));
            }
            if (~base.indexOf("e")) {
                _base = +base.split("e")[0] * Math.pow(10, digit % 3);
            }
            else {
                _base = +base.slice(0, digit % 3 + 4) / 1000;
            }
            tailIdx = digit / 3 >> 0;
        }
        else {
            n = n.split("e");
            if (+n[1] < 3) {
                var v = n[0] * Math.pow(10, n[1]);
                return this.roundNum(v, roundType, fixed);
            }
            _base = n[0] * Math.pow(10, n[1] % 3);
            while (_base > 1000) {
                _base /= 1000;
                n[1] = +n[1] + 3;
            }
            tailIdx = n[1] / 3 >> 0;
        }
        var tail;
        if (tailIdx < 4) {
            tail = ["", "K", "M", "B"][tailIdx];
        }
        else {
            var first = (tailIdx - 4) / 26 >> 0;
            var grade = first / 26 >> 0;
            var second = (tailIdx - 4) % 26;
            var a = "abcdefghijklmnopqrstuvwxyz";
            var b = a.toUpperCase();
            tail = (grade < 2 ? a : b)[first % 26] + (grade % 2 ? b : a)[second];
        }
        if (bigFixed === undefined) {
            bigFixed = _base < 10 ? 2 : _base < 100 ? 1 : 0;
        }
        var baseStr = this.roundNum(_base, roundType, bigFixed);
        return baseStr + tail;
    };
    BigNumUtils.roundNum = function (n, type, fixed) {
        var func;
        if (type === RountType.Round) {
            func = Math.round;
        }
        else if (type === RountType.Ceil) {
            func = Math.ceil;
        }
        else {
            func = Math.floor;
        }
        var val;
        if (fixed === 0) {
            val = func(n);
        }
        else {
            var b = Math.pow(10, fixed);
            val = func(b * n) / b;
        }
        return val.toFixed(fixed);
    };
    BigNumUtils.getFixNumber = function (num, fixed) {
        if (fixed === void 0) { fixed = 1; }
        var b = Math.pow(10, fixed);
        return Math.floor(num * b) / b;
    };
    BigNumUtils.getPercentString = function (num, fixed) {
        if (fixed === void 0) { fixed = 1; }
        if (typeof num === 'string') {
            return this.getNumberString(this.BNTimes(num, 100), fixed) + '%';
        }
        else {
            return this.getNumberString(num * 100, fixed) + '%';
        }
    };
    return BigNumUtils;
}());
exports.default = BigNumUtils;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvQ29tbW9uL1V0aWxzL0JpZ051bVV0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQWtCLFNBSWpCO0FBSkQsV0FBa0IsU0FBUztJQUN2QiwyQ0FBSyxDQUFBO0lBQ0wsMkNBQUssQ0FBQTtJQUNMLHlDQUFJLENBQUE7QUFDUixDQUFDLEVBSmlCLFNBQVMsR0FBVCxpQkFBUyxLQUFULGlCQUFTLFFBSTFCO0FBRUQ7SUFBQTtJQStZQSxDQUFDO0lBOVlpQixrQkFBTSxHQUFwQjtRQUFxQixjQUFjO2FBQWQsVUFBYyxFQUFkLHFCQUFjLEVBQWQsSUFBYztZQUFkLHlCQUFjOztRQUMvQixJQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNuQixLQUFLLElBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRTtZQUNyQyxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDbkIsSUFBSSxJQUFJLEVBQUUsTUFBTSxDQUFDO1lBQ2pCLElBQUksR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDO1lBQ2YsSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLEdBQUcsS0FBSyxRQUFRLENBQUMsRUFBRTtnQkFDeEMsTUFBTSxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7Z0JBQzVELElBQUksR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxN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QUssQ0FBQyxHQUFHLEdBQUcsQ0FBQztTQUNwRTthQUFNO1lBQ0gsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsR0FBRyxHQUFHLEVBQUUsS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDO1NBQ3ZEO0lBQ0wsQ0FBQztJQUNMLGtCQUFDO0FBQUQsQ0EvWUEsQUErWUMsSUFBQSIsImZpbGUiOiIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBlbnVtIFJvdW50VHlwZXtcbiAgICBSb3VuZCxcbiAgICBGbG9vcixcbiAgICBDZWlsLFxufVxuZGVjbGFyZSB0eXBlIEJpZ051bWJlciA9IG51bWJlciB8IHN0cmluZztcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ051bVV0aWxzIHtcbiAgICBwdWJsaWMgc3RhdGljIEJOUGx1cyguLi5hcmdzOiBhbnlbXSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBbMCwgMF07XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmdzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGFyZyA9IGFyZ3NbX2ldO1xuICAgICAgICAgICAgdmFyIGJhc2UsIHplcm9lcztcbiAgICAgICAgICAgIHZhciBudW0gPSArYXJnO1xuICAgICAgICAgICAgaWYgKG51bSA9PT0gMCB8fCAobnVtICYmIG51bSAhPT0gSW5maW5pdHkpKSB7XG4gICAgICAgICAgICAgICAgemVyb2VzID0gYXJnIDwgMTAgPyAwIDogTWF0aC5mbG9vcihNYXRoLmxvZzEwKCthcmcpICsgMWUtNik7XG4gICAgICAgICAgICAgICAgYmFzZSA9IGFyZyA8IDEwID8gYXJnIDogYXJnIC8gTWF0aC5wb3coMTAsIHplcm9lcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJnKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZy5zcGxpdChcImVcIik7XG4gICAgICAgICAgICAgICAgICAgIGJhc2UgPSArYXJnWzBdIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIHplcm9lcyA9ICthcmdbMV0gfHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2UgPSAwO1xuICAgICAgICAgICAgICAgICAgICB6ZXJvZXMgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh6ZXJvZXMgPiB2YWx1ZVsxXSkge1xuICAgICAgICAgICAgICAgIHZhbHVlWzBdIC89IE1hdGgucG93KDEwLCB6ZXJvZXMgLSB2YWx1ZVsxXSk7XG4gICAgICAgICAgICAgICAgdmFsdWVbMF0gKz0gYmFzZTtcbiAgICAgICAgICAgICAgICB2YWx1ZVsxXSA9IHplcm9lcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHVlWzBdICs9IGJhc2UgLyBNYXRoLnBvdygxMCwgdmFsdWVbMV0gLSB6ZXJvZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBzaWduID0gdmFsdWVbMF0gPj0gMCA/IDEgOiAtMTsgXG4gICAgICAgIGxldCByYmFzZSA9IE1hdGguYWJzKHZhbHVlWzBdKTtcbiAgICAgICAgd2hpbGUgKHJiYXNlIDwgMSAmJiB2YWx1ZVsxXSA+IDApIHtcbiAgICAgICAgICAgIHJiYXNlICo9IDEwO1xuICAgICAgICAgICAgdmFsdWVbMV0gLT0gMTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAocmJhc2UgPiAxMCkge1xuICAgICAgICAgICAgcmJhc2UgLz0gMTA7XG4gICAgICAgICAgICB2YWx1ZVsxXSArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJiYXNlICo9IHNpZ247XG4gICAgICAgIHJldHVybiBgJHtyYmFzZX1lJHt2YWx1ZVsxXX1gO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIEJOTWludXMoLi4uYXJnczogYW55W10pOkJpZ051bWJlciB7XG4gICAgICAgIHZhciB2YWx1ZSA9IFswLCAwXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3MubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYXJnID0gYXJnc1tfaV07XG4gICAgICAgICAgICB2YXIgaWR4ID0gX2k7XG4gICAgICAgICAgICB2YXIgYmFzZSwgemVyb2VzO1xuICAgICAgICAgICAgdmFyIG51bSA9ICthcmc7XG4gICAgICAgICAgICBpZiAobnVtID09PSAwIHx8IChudW0gJiYgbnVtICE9PSBJbmZpbml0eSkpIHtcbiAgICAgICAgICAgICAgICB6ZXJvZXMgPSBhcmcgPCAxMCA/IDAgOiBNYXRoLmZsb29yKE1hdGgubG9nMTAoK2FyZykgKyAxZS02KTtcbiAgICAgICAgICAgICAgICBiYXNlID0gYXJnIDwgMTAgPyBhcmcgOiBhcmcgLyBNYXRoLnBvdygxMCwgemVyb2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFyZyA9IGFyZy5zcGxpdChcImVcIik7XG4gICAgICAgICAgICAgICAgYmFzZSA9ICthcmdbMF07XG4gICAgICAgICAgICAgICAgemVyb2VzID0gK2FyZ1sxXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFpZHgpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZVswXSA9IGJhc2U7XG4gICAgICAgICAgICAgICAgdmFsdWVbMV0gPSB6ZXJvZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWVbMV0gPCB6ZXJvZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVbMF0gPSB2YWx1ZVswXSAvIE1hdGgucG93KDEwLCB6ZXJvZXMgLSB2YWx1ZVsxXSkgLSBiYXNlO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZVsxXSA9IHplcm9lcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlWzBdIC09IGJhc2UgLyBNYXRoLnBvdygxMCwgdmFsdWVbMV0gLSB6ZXJvZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBpZih2YWx1ZVswXSA8PSAxZS0xMCl7XG4gICAgICAgIC8vICAgcmV0dXJuIDA7XG4gICAgICAgIC8vIH1cbiAgICAgICAgbGV0IHNpZ24gPSB2YWx1ZVswXSA+PSAwID8gMSA6IC0xOyBcbiAgICAgICAgbGV0IHJiYXNlID0gTWF0aC5hYnModmFsdWVbMF0pO1xuICAgICAgICB3aGlsZSAocmJhc2UgPCAxICYmIHZhbHVlWzFdID4gMCkge1xuICAgICAgICAgICAgcmJhc2UgKj0gMTA7XG4gICAgICAgICAgICB2YWx1ZVsxXSAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChyYmFzZSA+IDEwKSB7XG4gICAgICAgICAgICByYmFzZSAvPSAxMDtcbiAgICAgICAgICAgIHZhbHVlWzFdICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmJhc2UgKj0gc2lnbjtcbiAgICAgICAgcmV0dXJuIGAke3JiYXNlfWUke3ZhbHVlWzFdfWA7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgQk5UaW1lcyguLi5hcmdzOiBhbnlbXSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBbMCwgMF07XG4gICAgICAgIGFyZ3MuZm9yRWFjaChmdW5jdGlvbiAoYXJnLCBpZHgpIHtcbiAgICAgICAgICAgIHZhciBiYXNlLCB6ZXJvZXM7XG4gICAgICAgICAgICB2YXIgbnVtID0gK2FyZztcbiAgICAgICAgICAgIGlmIChudW0gPT09IDAgfHwgKG51bSAmJiBudW0gIT09IEluZmluaXR5KSkge1xuICAgICAgICAgICAgICAgIHplcm9lcyA9IGFyZyA8IDEwID8gMCA6IE1hdGguZmxvb3IoTWF0aC5sb2cxMCgrYXJnKSArIDFlLTYpO1xuICAgICAgICAgICAgICAgIGJhc2UgPSBhcmcgPCAxMCA/IGFyZyA6IGFyZyAvIE1hdGgucG93KDEwLCB6ZXJvZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGFyZykge1xuICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcuc3BsaXQoXCJlXCIpO1xuICAgICAgICAgICAgICAgICAgICBiYXNlID0gK2FyZ1swXSB8fCAwO1xuICAgICAgICAgICAgICAgICAgICB6ZXJvZXMgPSArYXJnWzFdIHx8IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBiYXNlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgemVyb2VzID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlkeCkge1xuICAgICAgICAgICAgICAgIHZhbHVlWzBdID0gYmFzZTtcbiAgICAgICAgICAgICAgICB2YWx1ZVsxXSA9IHplcm9lcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHVlWzBdICo9IGJhc2U7XG4gICAgICAgICAgICAgICAgdmFsdWVbMV0gKz0gemVyb2VzO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZVswXSA+IDFlMzAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlWzBdIC89IDFlMzAwO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZVsxXSArPSAzMDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGxldCBzaWduID0gdmFsdWVbMF0gPj0gMCA/IDEgOiAtMTsgXG4gICAgICAgIGxldCBiYXNlID0gTWF0aC5hYnModmFsdWVbMF0pO1xuICAgICAgICB3aGlsZSAoYmFzZSA8IDEgJiYgdmFsdWVbMV0gPiAwKSB7XG4gICAgICAgICAgICBiYXNlICo9IDEwO1xuICAgICAgICAgICAgdmFsdWVbMV0gLT0gMTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoYmFzZSA+IDEwKSB7XG4gICAgICAgICAgICBiYXNlIC89IDEwO1xuICAgICAgICAgICAgdmFsdWVbMV0gKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7YmFzZSAqIHNpZ259ZSR7dmFsdWVbMV19YDtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBCTkRldmlkZSh2YWx1ZTAsIHZhbHVlMSkge1xuICAgICAgICBpZiAoK3ZhbHVlMSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZhbHVlID0gWzAsIDBdO1xuICAgICAgICBsZXQgc2lnbjpudW1iZXIgPSAxO1xuICAgICAgICBbdmFsdWUwLCB2YWx1ZTFdLmZvckVhY2goZnVuY3Rpb24gKGFyZywgaWR4KSB7XG4gICAgICAgICAgICB2YXIgYmFzZSwgemVyb2VzO1xuICAgICAgICAgICAgbGV0IHJlYWxOdW0gPSArYXJnO1xuICAgICAgICAgICAgdmFyIG51bSA9IE1hdGguYWJzKHJlYWxOdW0pO1xuICAgICAgICAgICAgaWYgKG51bSA9PT0gMCB8fCAobnVtICYmIG51bSAhPT0gSW5maW5pdHkpKSB7XG4gICAgICAgICAgICAgICAgemVyb2VzID0gbnVtIDwgMTAgPyAwIDogTWF0aC5mbG9vcihNYXRoLmxvZzEwKG51bSkgKyAxZS02KTtcbiAgICAgICAgICAgICAgICBiYXNlID0gbnVtIDwgMTAgPyBudW0gOiBudW0gLyBNYXRoLnBvdygxMCwgemVyb2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFyZyA9IGFyZy5zcGxpdChcImVcIik7XG4gICAgICAgICAgICAgICAgcmVhbE51bSA9ICthcmdbMF07XG4gICAgICAgICAgICAgICAgYmFzZSA9IE1hdGguYWJzKHJlYWxOdW0pO1xuICAgICAgICAgICAgICAgIHplcm9lcyA9ICthcmdbMV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNpZ24gKj0gcmVhbE51bSA+PSAwID8gMSA6IC0xO1xuICAgICAgICAgICAgaWYgKGlkeCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhbHVlWzBdID0gYmFzZTtcbiAgICAgICAgICAgICAgICB2YWx1ZVsxXSA9IHplcm9lcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHVlWzBdIC89IGJhc2U7XG4gICAgICAgICAgICAgICAgdmFsdWVbMV0gLT0gemVyb2VzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGJhc2UgPSBNYXRoLmFicyh2YWx1ZVswXSk7XG4gICAgICAgIHdoaWxlIChiYXNlIDwgMSAmJiB2YWx1ZVsxXSA+IDApIHtcbiAgICAgICAgICAgIGJhc2UgKj0gMTA7XG4gICAgICAgICAgICB2YWx1ZVsxXSAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChiYXNlID4gMTApIHtcbiAgICAgICAgICAgIGJhc2UgLz0gMTA7XG4gICAgICAgICAgICB2YWx1ZVsxXSArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGJhc2UgKj0gc2lnbjtcbiAgICAgICAgaWYgKHZhbHVlWzFdIDwgMTAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYmFzZSAqIE1hdGgucG93KDEwLCB2YWx1ZVsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuQk5UaW1lcyhiYXNlLCB0aGlzLkJOUG93KDEwLCB2YWx1ZVsxXSkpO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIEJOQ29tcGFyZSh2YWx1ZTAsIHZhbHVlMSkge1xuICAgICAgICB2YXIgYmFzZXMgPSBbMCwgMF07XG4gICAgICAgIHZhciB6ZXJvZXMgPSBbMCwgMF07XG4gICAgICAgIFt2YWx1ZTAsIHZhbHVlMV0uZm9yRWFjaChmdW5jdGlvbiAoYXJnLCBpZHgpIHtcbiAgICAgICAgICAgIHZhciBudW0gPSArYXJnO1xuICAgICAgICAgICAgaWYgKG51bSA9PT0gMCB8fCAobnVtICYmIG51bSAhPT0gSW5maW5pdHkpKSB7XG4gICAgICAgICAgICAgICAgemVyb2VzW2lkeF0gPSBhcmcgPCAxMCA/IDAgOiBNYXRoLmZsb29yKE1hdGgubG9nMTAoK2FyZykgKyAxZS02KTtcbiAgICAgICAgICAgICAgICBiYXNlc1tpZHhdID0gYXJnIDwgMTAgPyBhcmcgOiBhcmcgLyBNYXRoLnBvdygxMCwgemVyb2VzW2lkeF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXJnID0gYXJnLnNwbGl0KFwiZVwiKTtcbiAgICAgICAgICAgICAgICBiYXNlc1tpZHhdID0gK2FyZ1swXTtcbiAgICAgICAgICAgICAgICB6ZXJvZXNbaWR4XSA9ICthcmdbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYmFzZXNbMF0gKiBiYXNlc1sxXSA8IDAgPyAoYmFzZXNbMF0gPiAwID8gMSA6IC0xKSA6IHplcm9lc1sxXSA+IHplcm9lc1swXSA/IC0xIDogemVyb2VzWzFdIDwgemVyb2VzWzBdID8gMSA6IGJhc2VzWzFdID4gYmFzZXNbMF0gPyAtMSA6IGJhc2VzWzFdIDwgYmFzZXNbMF0gPyAxIDogMDtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBCTlBvdyhkaSwgemhpKSB7XG4gICAgICAgIGlmICghZGkpIHtcbiAgICAgICAgICAgIHJldHVybiBcIjBcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXpoaSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiMVwiO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXggPSBNYXRoLmZsb29yKE1hdGgubG9nKDFlMzAwKSAvIE1hdGgubG9nKGRpKSk7XG4gICAgICAgIG1heCA9IE1hdGgubWF4KG1heCwgMSk7XG4gICAgICAgIHZhciB2YWw6QmlnTnVtYmVyID0gMTtcbiAgICAgICAgaWYgKG1heCA+PSB6aGkpIHtcbiAgICAgICAgICAgIHZhbCA9IE1hdGgucG93KGRpLCB6aGkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRpbWVzID0gTWF0aC5mbG9vcih6aGkgLyBtYXgpO1xuICAgICAgICAgICAgbGV0IGFyciA9IFtdO1xuICAgICAgICAgICAgdmFyIG1pZCA9IE1hdGgucG93KGRpLCBtYXgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aW1lczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJyLnB1c2gobWlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFyci5wdXNoKE1hdGgucG93KGRpLCB6aGkgLSBtYXggKiB0aW1lcykpO1xuICAgICAgICAgICAgdmFsID0gdGhpcy5CTlRpbWVzLmFwcGx5KHRoaXMsIGFycik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBCTk1heCh2YWx1ZTAsIHZhbHVlMSkge1xuICAgICAgICByZXR1cm4gdGhpcy5CTkNvbXBhcmUodmFsdWUwLCB2YWx1ZTEpID4gMCA/IHZhbHVlMCA6IHZhbHVlMTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBCTk1pbih2YWx1ZTAsIHZhbHVlMSkge1xuICAgICAgICByZXR1cm4gdGhpcy5CTkNvbXBhcmUodmFsdWUwLCB2YWx1ZTEpID4gMCA/IHZhbHVlMSA6IHZhbHVlMDtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBCTkxvZyh2YWx1ZSkge1xuICAgICAgICBsZXQgbnVtID0gK3ZhbHVlO1xuICAgICAgICBpZiAobnVtID09PSAwIHx8IChudW0gJiYgbnVtICE9PSBJbmZpbml0eSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNpZ24gPSBudW0gPj0gMCA/IDEgOiAtMTtcbiAgICAgICAgICAgIG51bSA9IE1hdGguYWJzKG51bSk7XG4gICAgICAgICAgICByZXR1cm4gc2lnbiAqIE1hdGgubG9nMTAobnVtKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiArdmFsdWUuc3BsaXQoXCJlXCIpWzFdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgQk5TcXJ0KHZhbHVlKXtcbiAgICAgICAgY29uc3QgbnVtID0gK3ZhbHVlO1xuICAgICAgICBpZiAobnVtID09PSAwIHx8IChudW0gJiYgbnVtICE9PSBJbmZpbml0eSkpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQobnVtKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYXJyID0gdmFsdWUuc3BsaXQoXCJlXCIpO1xuICAgICAgICBsZXQgYSA9ICthcnJbMF07XG4gICAgICAgIGxldCBiID0gK2FyclsxXTtcbiAgICAgICAgcmV0dXJuIGAke01hdGguc3FydChhKX1lJHtiLzJ9YDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIEJOU3FydEV4KHZhbHVlLCB6aGk6bnVtYmVyKXtcbiAgICAgICAgY29uc3QgbnVtID0gK3ZhbHVlO1xuICAgICAgICBpZiAobnVtID09PSAwIHx8IChudW0gJiYgbnVtICE9PSBJbmZpbml0eSkpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdyhudW0sIDEvemhpKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYXJyID0gdmFsdWUuc3BsaXQoXCJlXCIpO1xuICAgICAgICBsZXQgYSA9ICthcnJbMF07XG4gICAgICAgIGxldCBiID0gK2FyclsxXTtcbiAgICAgICAgcmV0dXJuIGAke01hdGgucG93KGEsIDEvemhpKX1lJHtiL3poaX1gO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgQk5GbG9vcih2YWx1ZSl7XG4gICAgICAgIGNvbnN0IG51bSA9ICt2YWx1ZTtcbiAgICAgICAgaWYgKG51bSA9PT0gMCB8fCAobnVtICYmIG51bSAhPT0gSW5maW5pdHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihudW0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIEJOQ2VpbCh2YWx1ZSl7XG4gICAgICAgIGNvbnN0IG51bSA9ICt2YWx1ZTtcbiAgICAgICAgaWYgKG51bSA9PT0gMCB8fCAobnVtICYmIG51bSAhPT0gSW5maW5pdHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG51bSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgQk5Sb3VuZCh2YWx1ZSl7XG4gICAgICAgIGNvbnN0IG51bSA9ICt2YWx1ZTtcbiAgICAgICAgaWYgKG51bSA9PT0gMCB8fCAobnVtICYmIG51bSAhPT0gSW5maW5pdHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIEJOMk51bWJlcih2YWx1ZSkge1xuICAgICAgICBjb25zdCBudW0gPSArdmFsdWU7XG4gICAgICAgIGlmIChudW0gPT09IDAgfHwgKG51bSAmJiBudW0gIT09IEluZmluaXR5KSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBhcnIgPSB2YWx1ZS5zcGxpdChcImVcIik7XG4gICAgICAgICAgICByZXR1cm4gK2FyclswXSAqIE1hdGgucG93KDEwLCBhcnJbMV0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXRPd25TdHJpbmcobjphbnkpe1xuICAgICAgICByZXR1cm4gdGhpcy5nZXROdW1iZXJTdHJpbmcobiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIFJvdW50VHlwZS5GbG9vcik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb3N0U3RyaW5nKG46YW55KXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TnVtYmVyU3RyaW5nKG4sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBSb3VudFR5cGUuQ2VpbCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXROdW1iZXJTdHJpbmcobjphbnksIGZpeGVkOm51bWJlciA9IDAsIGJpZ0ZpeGVkPzpudW1iZXIsIHJvdW5kVHlwZSA9IFJvdW50VHlwZS5Sb3VuZCk6c3RyaW5ne1xuICAgICAgICBsZXQgX2Jhc2U6bnVtYmVyO1xuICAgICAgICBsZXQgdGFpbElkeDtcbiAgICAgICAgY29uc3QgbnVtID0gK247XG4gICAgICAgIGlmIChudW0gPT09IDAgfHwgKG51bSAmJiBudW0gIT09IEluZmluaXR5KSkge1xuICAgICAgICAgICAgaWYobiA8IDEwMDApe1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJvdW5kTnVtKG4sIHJvdW5kVHlwZSwgZml4ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGJhc2U6c3RyaW5nID0gYCR7TWF0aC5yb3VuZChuKX1gO1xuICAgICAgICAgICAgbGV0IGRpZ2l0Om51bWJlciA9IDA7XG4gICAgICAgICAgICBpZih+YmFzZS5pbmRleE9mKFwiZVwiKSl7XG4gICAgICAgICAgICAgICAgLy9maXggYnVnIE1hdGgubG9nMTAoOS45OTk5OTk5OTk5OTk5OTZlKzM4KT0zOVxuICAgICAgICAgICAgICAgIGxldCBkaXNodTpudW1iZXIgPSArYmFzZS5zcGxpdChcImVcIilbMF07XG4gICAgICAgICAgICAgICAgbGV0IHpoaXNodTpudW1iZXIgPSArYmFzZS5zcGxpdChcImVcIilbMV07XG4gICAgICAgICAgICAgICAgemhpc2h1ICs9IE1hdGguZmxvb3IoTWF0aC5sb2cxMChkaXNodSkpO1xuICAgICAgICAgICAgICAgIGRpZ2l0ID0gemhpc2h1O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkaWdpdCA9IE1hdGguZmxvb3IoTWF0aC5sb2cxMChuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKH5iYXNlLmluZGV4T2YoXCJlXCIpKXtcbiAgICAgICAgICAgICAgICBfYmFzZSA9ICtiYXNlLnNwbGl0KFwiZVwiKVswXSAqIE1hdGgucG93KDEwLGRpZ2l0ICUgMyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIF9iYXNlID0gK2Jhc2Uuc2xpY2UoMCwgZGlnaXQgJSAzICsgNCkgLyAxMDAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFpbElkeCA9IGRpZ2l0IC8gMyA+PiAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBuID0gbi5zcGxpdChcImVcIik7XG4gICAgICAgICAgICBpZigrblsxXSA8IDMpe1xuICAgICAgICAgICAgICAgIGxldCB2ID0gblswXSAqIE1hdGgucG93KDEwLG5bMV0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJvdW5kTnVtKHYsIHJvdW5kVHlwZSwgZml4ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2Jhc2UgPSBuWzBdICogTWF0aC5wb3coMTAsblsxXSAlIDMpO1xuICAgICAgICAgICAgd2hpbGUoX2Jhc2UgPiAxMDAwKXtcbiAgICAgICAgICAgICAgICBfYmFzZSAvPSAxMDAwO1xuICAgICAgICAgICAgICAgIG5bMV0gPSArblsxXSArIDM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YWlsSWR4ID0gblsxXSAvIDMgPj4gMDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGFpbDtcbiAgICAgICAgaWYodGFpbElkeCA8IDQpe1xuICAgICAgICAgICAgdGFpbCA9IFtcIlwiLFwiS1wiLFwiTVwiLFwiQlwiXVt0YWlsSWR4XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgdmFyIGZpcnN0ID0gKHRhaWxJZHggLSA0KSAvIDI2ID4+IDA7XG5cbiAgICAgICAgICAgIHZhciBncmFkZSA9IGZpcnN0IC8gMjYgPj4gMDtcblxuICAgICAgICAgICAgdmFyIHNlY29uZCA9ICh0YWlsSWR4IC0gNCkgJSAyNjtcbiAgICAgICAgICAgIHZhciBhID0gXCJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5elwiO1xuICAgICAgICAgICAgdmFyIGIgPSBhLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgICAgICAgIHRhaWwgPSAoZ3JhZGUgPCAyID8gYSA6IGIpW2ZpcnN0ICUgMjZdICsgKGdyYWRlICUgMiA/IGIgOiBhKVtzZWNvbmRdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoYmlnRml4ZWQgPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICBiaWdGaXhlZCA9IF9iYXNlIDwgMTAgPyAyIDogX2Jhc2UgPCAxMDAgPyAxIDogMFxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJhc2VTdHIgPSB0aGlzLnJvdW5kTnVtKF9iYXNlLCByb3VuZFR5cGUsIGJpZ0ZpeGVkKTtcbiAgICAgICAgcmV0dXJuIGJhc2VTdHIgKyB0YWlsO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIHJvdW5kTnVtKG46bnVtYmVyLCB0eXBlOlJvdW50VHlwZSwgZml4ZWQ6bnVtYmVyKXtcbiAgICAgICAgbGV0IGZ1bmM7XG4gICAgICAgIGlmKHR5cGUgPT09IFJvdW50VHlwZS5Sb3VuZCl7XG4gICAgICAgICAgICBmdW5jID0gTWF0aC5yb3VuZDtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT09IFJvdW50VHlwZS5DZWlsKXtcbiAgICAgICAgICAgIGZ1bmMgPSBNYXRoLmNlaWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmdW5jID0gTWF0aC5mbG9vcjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdmFsOm51bWJlcjtcbiAgICAgICAgaWYoZml4ZWQgPT09IDApe1xuICAgICAgICAgICAgdmFsID0gZnVuYyhuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGIgPSBNYXRoLnBvdygxMCwgZml4ZWQpO1xuICAgICAgICAgICAgdmFsID0gZnVuYyhiICogbikgLyBiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWwudG9GaXhlZChmaXhlZCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXRGaXhOdW1iZXIobnVtOm51bWJlciwgZml4ZWQ6bnVtYmVyID0gMSkge1xuICAgICAgICBjb25zdCBiID0gTWF0aC5wb3coMTAsIGZpeGVkKVxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihudW0gKiBiKSAvIGI7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXRQZXJjZW50U3RyaW5nKG51bTpCaWdOdW1iZXIsIGZpeGVkOm51bWJlciA9IDEpe1xuICAgICAgICBpZih0eXBlb2YgbnVtID09PSAnc3RyaW5nJyl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXROdW1iZXJTdHJpbmcodGhpcy5CTlRpbWVzKG51bSwgMTAwKSwgZml4ZWQpICsgJyUnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TnVtYmVyU3RyaW5nKG51bSAqIDEwMCwgZml4ZWQpICsgJyUnO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==
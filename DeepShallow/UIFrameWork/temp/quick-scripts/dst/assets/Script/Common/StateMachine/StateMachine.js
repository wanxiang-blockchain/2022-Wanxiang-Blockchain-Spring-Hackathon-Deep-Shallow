
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Common/StateMachine/StateMachine.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'a7054SKrgdF4Z4s5xp++8qZ', 'StateMachine');
// Script/Common/StateMachine/StateMachine.js

"use strict";

/*
  Javascript State Machine Library - https://github.com/jakesgordon/javascript-state-machine
  Copyright (c) 2012, 2013, 2014, 2015, Jake Gordon and contributors
  Released under the MIT license - https://github.com/jakesgordon/javascript-state-machine/blob/master/LICENSE
*/
(function () {
  var StateMachine = {
    //---------------------------------------------------------------------------
    VERSION: "2.4.0",
    //---------------------------------------------------------------------------
    Result: {
      SUCCEEDED: 1,
      // the event transitioned successfully from one state to another
      NOTRANSITION: 2,
      // the event was successfull but no state transition was necessary
      CANCELLED: 3,
      // the event was cancelled by the caller in a beforeEvent callback
      PENDING: 4 // the event is asynchronous and the caller is in control of when the transition occurs

    },
    Error: {
      INVALID_TRANSITION: 100,
      // caller tried to fire an event that was innapropriate in the current state
      PENDING_TRANSITION: 200,
      // caller tried to fire an event while an async transition was still pending
      INVALID_CALLBACK: 300 // caller provided callback function threw an exception

    },
    WILDCARD: '*',
    ASYNC: 'async',
    //---------------------------------------------------------------------------
    create: function create(cfg, target) {
      var initial = typeof cfg.initial == 'string' ? {
        state: cfg.initial
      } : cfg.initial; // allow for a simple string, or an object with { state: 'foo', event: 'setup', defer: true|false }

      var terminal = cfg.terminal || cfg['final'];
      var fsm = target || cfg.target || {};
      var events = cfg.events || [];
      var callbacks = cfg.callbacks || {};
      var map = {}; // track state transitions allowed for an event { event: { from: [ to ] } }

      var transitions = {}; // track events allowed from a state            { state: [ event ] }

      var add = function add(e) {
        var from = Array.isArray(e.from) ? e.from : e.from ? [e.from] : [StateMachine.WILDCARD]; // allow 'wildcard' transition if 'from' is not specified

        map[e.name] = map[e.name] || {};

        for (var n = 0; n < from.length; n++) {
          transitions[from[n]] = transitions[from[n]] || [];
          transitions[from[n]].push(e.name);
          map[e.name][from[n]] = e.to || from[n]; // allow no-op transition if 'to' is not specified
        }

        if (e.to) transitions[e.to] = transitions[e.to] || [];
      };

      if (initial) {
        initial.event = initial.event || 'startup';
        add({
          name: initial.event,
          from: 'none',
          to: initial.state
        });
      }

      for (var n = 0; n < events.length; n++) {
        add(events[n]);
      }

      for (var name in map) {
        if (map.hasOwnProperty(name)) fsm[name] = StateMachine.buildEvent(name, map[name]);
      }

      for (var name in callbacks) {
        if (callbacks.hasOwnProperty(name)) fsm[name] = callbacks[name];
      }

      fsm.current = 'none';

      fsm.is = function (state) {
        return Array.isArray(state) ? state.indexOf(this.current) >= 0 : this.current === state;
      };

      fsm.can = function (event) {
        return !this.transition && map[event] !== undefined && (map[event].hasOwnProperty(this.current) || map[event].hasOwnProperty(StateMachine.WILDCARD));
      };

      fsm.cannot = function (event) {
        return !this.can(event);
      };

      fsm.transitions = function () {
        return (transitions[this.current] || []).concat(transitions[StateMachine.WILDCARD] || []);
      };

      fsm.isFinished = function () {
        return this.is(terminal);
      };

      fsm.error = cfg.error || function (name, from, to, args, error, msg, e) {
        throw e || msg;
      }; // default behavior when something unexpected happens is to throw an exception, but caller can override this behavior if desired (see github issue #3 and #17)


      fsm.states = function () {
        return Object.keys(transitions).sort();
      };

      if (initial && !initial.defer) fsm[initial.event]();
      return fsm;
    },
    //===========================================================================
    doCallback: function doCallback(fsm, func, name, from, to, args) {
      if (func) {
        try {
          return func.apply(fsm, [name, from, to].concat(args));
        } catch (e) {
          return fsm.error(name, from, to, args, StateMachine.Error.INVALID_CALLBACK, "an exception occurred in a caller-provided callback function", e);
        }
      }
    },
    beforeAnyEvent: function beforeAnyEvent(fsm, name, from, to, args) {
      return StateMachine.doCallback(fsm, fsm['onbeforeevent'], name, from, to, args);
    },
    afterAnyEvent: function afterAnyEvent(fsm, name, from, to, args) {
      return StateMachine.doCallback(fsm, fsm['onafterevent'] || fsm['onevent'], name, from, to, args);
    },
    leaveAnyState: function leaveAnyState(fsm, name, from, to, args) {
      return StateMachine.doCallback(fsm, fsm['onleavestate'], name, from, to, args);
    },
    enterAnyState: function enterAnyState(fsm, name, from, to, args) {
      return StateMachine.doCallback(fsm, fsm['onenterstate'] || fsm['onstate'], name, from, to, args);
    },
    changeState: function changeState(fsm, name, from, to, args) {
      return StateMachine.doCallback(fsm, fsm['onchangestate'], name, from, to, args);
    },
    beforeThisEvent: function beforeThisEvent(fsm, name, from, to, args) {
      return StateMachine.doCallback(fsm, fsm['onbefore' + name], name, from, to, args);
    },
    afterThisEvent: function afterThisEvent(fsm, name, from, to, args) {
      return StateMachine.doCallback(fsm, fsm['onafter' + name] || fsm['on' + name], name, from, to, args);
    },
    leaveThisState: function leaveThisState(fsm, name, from, to, args) {
      return StateMachine.doCallback(fsm, fsm['onleave' + from], name, from, to, args);
    },
    enterThisState: function enterThisState(fsm, name, from, to, args) {
      return StateMachine.doCallback(fsm, fsm['onenter' + to] || fsm['on' + to], name, from, to, args);
    },
    beforeEvent: function beforeEvent(fsm, name, from, to, args) {
      if (false === StateMachine.beforeThisEvent(fsm, name, from, to, args) || false === StateMachine.beforeAnyEvent(fsm, name, from, to, args)) return false;
    },
    afterEvent: function afterEvent(fsm, name, from, to, args) {
      StateMachine.afterThisEvent(fsm, name, from, to, args);
      StateMachine.afterAnyEvent(fsm, name, from, to, args);
    },
    leaveState: function leaveState(fsm, name, from, to, args) {
      var specific = StateMachine.leaveThisState(fsm, name, from, to, args),
          general = StateMachine.leaveAnyState(fsm, name, from, to, args);
      if (false === specific || false === general) return false;else if (StateMachine.ASYNC === specific || StateMachine.ASYNC === general) return StateMachine.ASYNC;
    },
    enterState: function enterState(fsm, name, from, to, args) {
      StateMachine.enterThisState(fsm, name, from, to, args);
      StateMachine.enterAnyState(fsm, name, from, to, args);
    },
    //===========================================================================
    buildEvent: function buildEvent(name, map) {
      return function () {
        var from = this.current;
        var to = map[from] || (map[StateMachine.WILDCARD] != StateMachine.WILDCARD ? map[StateMachine.WILDCARD] : from) || from;
        var args = Array.prototype.slice.call(arguments); // turn arguments into pure array

        if (this.transition) return this.error(name, from, to, args, StateMachine.Error.PENDING_TRANSITION, "event " + name + " inappropriate because previous transition did not complete");
        if (this.cannot(name)) return this.error(name, from, to, args, StateMachine.Error.INVALID_TRANSITION, "event " + name + " inappropriate in current state " + this.current);
        if (false === StateMachine.beforeEvent(this, name, from, to, args)) return StateMachine.Result.CANCELLED;

        if (from === to) {
          StateMachine.afterEvent(this, name, from, to, args);
          return StateMachine.Result.NOTRANSITION;
        } // prepare a transition method for use EITHER lower down, or by caller if they want an async transition (indicated by an ASYNC return value from leaveState)


        var fsm = this;

        this.transition = function () {
          fsm.transition = null; // this method should only ever be called once

          fsm.current = to;
          StateMachine.enterState(fsm, name, from, to, args);
          StateMachine.changeState(fsm, name, from, to, args);
          StateMachine.afterEvent(fsm, name, from, to, args);
          return StateMachine.Result.SUCCEEDED;
        };

        this.transition.cancel = function () {
          // provide a way for caller to cancel async transition if desired (issue #22)
          fsm.transition = null;
          StateMachine.afterEvent(fsm, name, from, to, args);
        };

        var leave = StateMachine.leaveState(this, name, from, to, args);

        if (false === leave) {
          this.transition = null;
          return StateMachine.Result.CANCELLED;
        } else if (StateMachine.ASYNC === leave) {
          return StateMachine.Result.PENDING;
        } else {
          if (this.transition) // need to check in case user manually called transition() but forgot to return StateMachine.ASYNC
            return this.transition();
        }
      };
    }
  }; // StateMachine
  //===========================================================================
  //======
  // NODE
  //======

  if (typeof exports !== 'undefined') {
    if (typeof module !== 'undefined' && module.exports) {
      exports = module.exports = StateMachine;
    }

    exports.StateMachine = StateMachine;
  } //============
  // AMD/REQUIRE
  //============
  else if (typeof define === 'function' && define.amd) {
    define(function (require) {
      return StateMachine;
    });
  } //========
  // BROWSER
  //========
  else if (typeof window !== 'undefined') {
    window.StateMachine = StateMachine;
  } //===========
  // WEB WORKER
  //===========
  else if (typeof self !== 'undefined') {
    self.StateMachine = StateMachine;
  }
})();

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvQ29tbW9uL1N0YXRlTWFjaGluZS9TdGF0ZU1hY2hpbmUuanMiXSwibmFtZXMiOlsiU3RhdGVNYWNoaW5lIiwiVkVSU0lPTiIsIlJlc3VsdCIsIlNVQ0NFRURFRCIsIk5PVFJBTlNJVElPTiIsIkNBTkNFTExFRCIsIlBFTkRJTkciLCJFcnJvciIsIklOVkFMSURfVFJBTlNJVElPTiIsIlBFTkRJTkdfVFJBTlNJVElPTiIsIklOVkFMSURfQ0FMTEJBQ0siLCJXSUxEQ0FSRCIsIkFTWU5DIiwiY3JlYXRlIiwiY2ZnIiwidGFyZ2V0IiwiaW5pdGlhbCIsInN0YXRlIiwidGVybWluYWwiLCJmc20iLCJldmVudHMiLCJjYWxsYmFja3MiLCJtYXAiLCJ0cmFuc2l0aW9ucyIsImFkZCIsImUiLCJmcm9tIiwiQXJyYXkiLCJpc0FycmF5IiwibmFtZSIsIm4iLCJsZW5ndGgiLCJwdXNoIiwidG8iLCJldmVudCIsImhhc093blByb3BlcnR5IiwiYnVpbGRFdmVudCIsImN1cnJlbnQiLCJpcyIsImluZGV4T2YiLCJjYW4iLCJ0cmFuc2l0aW9uIiwidW5kZWZpbmVkIiwiY2Fubm90IiwiY29uY2F0IiwiaXNGaW5pc2hlZCIsImVycm9yIiwiYXJncyIsIm1zZyIsInN0YXRlcyIsIk9iamVjdCIsImtleXMiLCJzb3J0IiwiZGVmZXIiLCJkb0NhbGxiYWNrIiwiZnVuYyIsImFwcGx5IiwiYmVmb3JlQW55RXZlbnQiLCJhZnRlckFueUV2ZW50IiwibGVhdmVBbnlTdGF0ZSIsImVudGVyQW55U3RhdGUiLCJjaGFuZ2VTdGF0ZSIsImJlZm9yZVRoaXNFdmVudCIsImFmdGVyVGhpc0V2ZW50IiwibGVhdmVUaGlzU3RhdGUiLCJlbnRlclRoaXNTdGF0ZSIsImJlZm9yZUV2ZW50IiwiYWZ0ZXJFdmVudCIsImxlYXZlU3RhdGUiLCJzcGVjaWZpYyIsImdlbmVyYWwiLCJlbnRlclN0YXRlIiwicHJvdG90eXBlIiwic2xpY2UiLCJjYWxsIiwiYXJndW1lbnRzIiwiY2FuY2VsIiwibGVhdmUiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwicmVxdWlyZSIsIndpbmRvdyIsInNlbGYiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVDLGFBQVk7QUFFVCxNQUFJQSxZQUFZLEdBQUc7QUFFakI7QUFFQUMsSUFBQUEsT0FBTyxFQUFFLE9BSlE7QUFNakI7QUFFQUMsSUFBQUEsTUFBTSxFQUFFO0FBQ05DLE1BQUFBLFNBQVMsRUFBSyxDQURSO0FBQ1c7QUFDakJDLE1BQUFBLFlBQVksRUFBRSxDQUZSO0FBRVc7QUFDakJDLE1BQUFBLFNBQVMsRUFBSyxDQUhSO0FBR1c7QUFDakJDLE1BQUFBLE9BQU8sRUFBTyxDQUpSLENBSVc7O0FBSlgsS0FSUztBQWVqQkMsSUFBQUEsS0FBSyxFQUFFO0FBQ0xDLE1BQUFBLGtCQUFrQixFQUFFLEdBRGY7QUFDb0I7QUFDekJDLE1BQUFBLGtCQUFrQixFQUFFLEdBRmY7QUFFb0I7QUFDekJDLE1BQUFBLGdCQUFnQixFQUFJLEdBSGYsQ0FHbUI7O0FBSG5CLEtBZlU7QUFxQmpCQyxJQUFBQSxRQUFRLEVBQUUsR0FyQk87QUFzQmpCQyxJQUFBQSxLQUFLLEVBQUUsT0F0QlU7QUF3QmpCO0FBRUFDLElBQUFBLE1BQU0sRUFBRSxnQkFBU0MsR0FBVCxFQUFjQyxNQUFkLEVBQXNCO0FBRTVCLFVBQUlDLE9BQU8sR0FBUyxPQUFPRixHQUFHLENBQUNFLE9BQVgsSUFBc0IsUUFBdkIsR0FBbUM7QUFBRUMsUUFBQUEsS0FBSyxFQUFFSCxHQUFHLENBQUNFO0FBQWIsT0FBbkMsR0FBNERGLEdBQUcsQ0FBQ0UsT0FBbkYsQ0FGNEIsQ0FFZ0U7O0FBQzVGLFVBQUlFLFFBQVEsR0FBT0osR0FBRyxDQUFDSSxRQUFKLElBQWdCSixHQUFHLENBQUMsT0FBRCxDQUF0QztBQUNBLFVBQUlLLEdBQUcsR0FBWUosTUFBTSxJQUFJRCxHQUFHLENBQUNDLE1BQWQsSUFBeUIsRUFBNUM7QUFD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Q3RDQSxJQUFBQSxNQUFNLENBQUNuRixZQUFQLEdBQXNCQSxZQUF0QjtBQUNELEdBRkksQ0FHTDtBQUNBO0FBQ0E7QUFMSyxPQU1BLElBQUksT0FBT29GLElBQVAsS0FBZ0IsV0FBcEIsRUFBaUM7QUFDcENBLElBQUFBLElBQUksQ0FBQ3BGLFlBQUwsR0FBb0JBLFlBQXBCO0FBQ0Q7QUFFRixDQTVORixHQUFEIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICBKYXZhc2NyaXB0IFN0YXRlIE1hY2hpbmUgTGlicmFyeSAtIGh0dHBzOi8vZ2l0aHViLmNvbS9qYWtlc2dvcmRvbi9qYXZhc2NyaXB0LXN0YXRlLW1hY2hpbmVcbiAgQ29weXJpZ2h0IChjKSAyMDEyLCAyMDEzLCAyMDE0LCAyMDE1LCBKYWtlIEdvcmRvbiBhbmQgY29udHJpYnV0b3JzXG4gIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSAtIGh0dHBzOi8vZ2l0aHViLmNvbS9qYWtlc2dvcmRvbi9qYXZhc2NyaXB0LXN0YXRlLW1hY2hpbmUvYmxvYi9tYXN0ZXIvTElDRU5TRVxuKi9cblxuKGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBTdGF0ZU1hY2hpbmUgPSB7XG4gIFxuICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgXG4gICAgICBWRVJTSU9OOiBcIjIuNC4wXCIsXG4gIFxuICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgXG4gICAgICBSZXN1bHQ6IHtcbiAgICAgICAgU1VDQ0VFREVEOiAgICAxLCAvLyB0aGUgZXZlbnQgdHJhbnNpdGlvbmVkIHN1Y2Nlc3NmdWxseSBmcm9tIG9uZSBzdGF0ZSB0byBhbm90aGVyXG4gICAgICAgIE5PVFJBTlNJVElPTjogMiwgLy8gdGhlIGV2ZW50IHdhcyBzdWNjZXNzZnVsbCBidXQgbm8gc3RhdGUgdHJhbnNpdGlvbiB3YXMgbmVjZXNzYXJ5XG4gICAgICAgIENBTkNFTExFRDogICAgMywgLy8gdGhlIGV2ZW50IHdhcyBjYW5jZWxsZWQgYnkgdGhlIGNhbGxlciBpbiBhIGJlZm9yZUV2ZW50IGNhbGxiYWNrXG4gICAgICAgIFBFTkRJTkc6ICAgICAgNCAgLy8gdGhlIGV2ZW50IGlzIGFzeW5jaHJvbm91cyBhbmQgdGhlIGNhbGxlciBpcyBpbiBjb250cm9sIG9mIHdoZW4gdGhlIHRyYW5zaXRpb24gb2NjdXJzXG4gICAgICB9LFxuICBcbiAgICAgIEVycm9yOiB7XG4gICAgICAgIElOVkFMSURfVFJBTlNJVElPTjogMTAwLCAvLyBjYWxsZXIgdHJpZWQgdG8gZmlyZSBhbiBldmVudCB0aGF0IHdhcyBpbm5hcHJvcHJpYXRlIGluIHRoZSBjdXJyZW50IHN0YXRlXG4gICAgICAgIFBFTkRJTkdfVFJBTlNJVElPTjogMjAwLCAvLyBjYWxsZXIgdHJpZWQgdG8gZmlyZSBhbiBldmVudCB3aGlsZSBhbiBhc3luYyB0cmFuc2l0aW9uIHdhcyBzdGlsbCBwZW5kaW5nXG4gICAgICAgIElOVkFMSURfQ0FMTEJBQ0s6ICAgMzAwIC8vIGNhbGxlciBwcm92aWRlZCBjYWxsYmFjayBmdW5jdGlvbiB0aHJldyBhbiBleGNlcHRpb25cbiAgICAgIH0sXG4gIFxuICAgICAgV0lMRENBUkQ6ICcqJyxcbiAgICAgIEFTWU5DOiAnYXN5bmMnLFxuICBcbiAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIFxuICAgICAgY3JlYXRlOiBmdW5jdGlvbihjZmcsIHRhcmdldCkge1xuICBcbiAgICAgICAgdmFyIGluaXRpYWwgICAgICA9ICh0eXBlb2YgY2ZnLmluaXRpYWwgPT0gJ3N0cmluZycpID8geyBzdGF0ZTogY2ZnLmluaXRpYWwgfSA6IGNmZy5pbml0aWFsOyAvLyBhbGxvdyBmb3IgYSBzaW1wbGUgc3RyaW5nLCBvciBhbiBvYmplY3Qgd2l0aCB7IHN0YXRlOiAnZm9vJywgZXZlbnQ6ICdzZXR1cCcsIGRlZmVyOiB0cnVlfGZhbHNlIH1cbiAgICAgICAgdmFyIHRlcm1pbmFsICAgICA9IGNmZy50ZXJtaW5hbCB8fCBjZmdbJ2ZpbmFsJ107XG4gICAgICAgIHZhciBmc20gICAgICAgICAgPSB0YXJnZXQgfHwgY2ZnLnRhcmdldCAgfHwge307XG4gICAgICAgIHZhciBldmVudHMgICAgICAgPSBjZmcuZXZlbnRzIHx8IFtdO1xuICAgICAgICB2YXIgY2FsbGJhY2tzICAgID0gY2ZnLmNhbGxiYWNrcyB8fCB7fTtcbiAgICAgICAgdmFyIG1hcCAgICAgICAgICA9IHt9OyAvLyB0cmFjayBzdGF0ZSB0cmFuc2l0aW9ucyBhbGxvd2VkIGZvciBhbiBldmVudCB7IGV2ZW50OiB7IGZyb206IFsgdG8gXSB9IH1cbiAgICAgICAgdmFyIHRyYW5zaXRpb25zICA9IHt9OyAvLyB0cmFjayBldmVudHMgYWxsb3dlZCBmcm9tIGEgc3RhdGUgICAgICAgICAgICB7IHN0YXRlOiBbIGV2ZW50IF0gfVxuICBcbiAgICAgICAgdmFyIGFkZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICB2YXIgZnJvbSA9IEFycmF5LmlzQXJyYXkoZS5mcm9tKSA/IGUuZnJvbSA6IChlLmZyb20gPyBbZS5mcm9tXSA6IFtTdGF0ZU1hY2hpbmUuV0lMRENBUkRdKTsgLy8gYWxsb3cgJ3dpbGRjYXJkJyB0cmFuc2l0aW9uIGlmICdmcm9tJyBpcyBub3Qgc3BlY2lmaWVkXG4gICAgICAgICAgbWFwW2UubmFtZV0gPSBtYXBbZS5uYW1lXSB8fCB7fTtcbiAgICAgICAgICBmb3IgKHZhciBuID0gMCA7IG4gPCBmcm9tLmxlbmd0aCA7IG4rKykge1xuICAgICAgICAgICAgdHJhbnNpdGlvbnNbZnJvbVtuXV0gPSB0cmFuc2l0aW9uc1tmcm9tW25dXSB8fCBbXTtcbiAgICAgICAgICAgIHRyYW5zaXRpb25zW2Zyb21bbl1dLnB1c2goZS5uYW1lKTtcbiAgXG4gICAgICAgICAgICBtYXBbZS5uYW1lXVtmcm9tW25dXSA9IGUudG8gfHwgZnJvbVtuXTsgLy8gYWxsb3cgbm8tb3AgdHJhbnNpdGlvbiBpZiAndG8nIGlzIG5vdCBzcGVjaWZpZWRcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGUudG8pXG4gICAgICAgICAgICB0cmFuc2l0aW9uc1tlLnRvXSA9IHRyYW5zaXRpb25zW2UudG9dIHx8IFtdO1xuICAgICAgICB9O1xuICBcbiAgICAgICAgaWYgKGluaXRpYWwpIHtcbiAgICAgICAgICBpbml0aWFsLmV2ZW50ID0gaW5pdGlhbC5ldmVudCB8fCAnc3RhcnR1cCc7XG4gICAgICAgICAgYWRkKHsgbmFtZTogaW5pdGlhbC5ldmVudCwgZnJvbTogJ25vbmUnLCB0bzogaW5pdGlhbC5zdGF0ZSB9KTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgZm9yKHZhciBuID0gMCA7IG4gPCBldmVudHMubGVuZ3RoIDsgbisrKVxuICAgICAgICAgIGFkZChldmVudHNbbl0pO1xuICBcbiAgICAgICAgZm9yKHZhciBuYW1lIGluIG1hcCkge1xuICAgICAgICAgIGlmIChtYXAuaGFzT3duUHJvcGVydHkobmFtZSkpXG4gICAgICAgICAgICBmc21bbmFtZV0gPSBTdGF0ZU1hY2hpbmUuYnVpbGRFdmVudChuYW1lLCBtYXBbbmFtZV0pO1xuICAgICAgICB9XG4gIFxuICAgICAgICBmb3IodmFyIG5hbWUgaW4gY2FsbGJhY2tzKSB7XG4gICAgICAgICAgaWYgKGNhbGxiYWNrcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSlcbiAgICAgICAgICAgIGZzbVtuYW1lXSA9IGNhbGxiYWNrc1tuYW1lXVxuICAgICAgICB9XG4gIFxuICAgICAgICBmc20uY3VycmVudCAgICAgPSAnbm9uZSc7XG4gICAgICAgIGZzbS5pcyAgICAgICAgICA9IGZ1bmN0aW9uKHN0YXRlKSB7IHJldHVybiBBcnJheS5pc0FycmF5KHN0YXRlKSA/IChzdGF0ZS5pbmRleE9mKHRoaXMuY3VycmVudCkgPj0gMCkgOiAodGhpcy5jdXJyZW50ID09PSBzdGF0ZSk7IH07XG4gICAgICAgIGZzbS5jYW4gICAgICAgICA9IGZ1bmN0aW9uKGV2ZW50KSB7IHJldHVybiAhdGhpcy50cmFuc2l0aW9uICYmIChtYXBbZXZlbnRdICE9PSB1bmRlZmluZWQpICYmIChtYXBbZXZlbnRdLmhhc093blByb3BlcnR5KHRoaXMuY3VycmVudCkgfHwgbWFwW2V2ZW50XS5oYXNPd25Qcm9wZXJ0eShTdGF0ZU1hY2hpbmUuV0lMRENBUkQpKTsgfVxuICAgICAgICBmc20uY2Fubm90ICAgICAgPSBmdW5jdGlvbihldmVudCkgeyByZXR1cm4gIXRoaXMuY2FuKGV2ZW50KTsgfTtcbiAgICAgICAgZnNtLnRyYW5zaXRpb25zID0gZnVuY3Rpb24oKSAgICAgIHsgcmV0dXJuICh0cmFuc2l0aW9uc1t0aGlzLmN1cnJlbnRdIHx8IFtdKS5jb25jYXQodHJhbnNpdGlvbnNbU3RhdGVNYWNoaW5lLldJTERDQVJEXSB8fCBbXSk7IH07XG4gICAgICAgIGZzbS5pc0ZpbmlzaGVkICA9IGZ1bmN0aW9uKCkgICAgICB7IHJldHVybiB0aGlzLmlzKHRlcm1pbmFsKTsgfTtcbiAgICAgICAgZnNtLmVycm9yICAgICAgID0gY2ZnLmVycm9yIHx8IGZ1bmN0aW9uKG5hbWUsIGZyb20sIHRvLCBhcmdzLCBlcnJvciwgbXNnLCBlKSB7IHRocm93IGUgfHwgbXNnOyB9OyAvLyBkZWZhdWx0IGJlaGF2aW9yIHdoZW4gc29tZXRoaW5nIHVuZXhwZWN0ZWQgaGFwcGVucyBpcyB0byB0aHJvdyBhbiBleGNlcHRpb24sIGJ1dCBjYWxsZXIgY2FuIG92ZXJyaWRlIHRoaXMgYmVoYXZpb3IgaWYgZGVzaXJlZCAoc2VlIGdpdGh1YiBpc3N1ZSAjMyBhbmQgIzE3KVxuICAgICAgICBmc20uc3RhdGVzICAgICAgPSBmdW5jdGlvbigpIHsgcmV0dXJuIE9iamVjdC5rZXlzKHRyYW5zaXRpb25zKS5zb3J0KCkgfTtcbiAgXG4gICAgICAgIGlmIChpbml0aWFsICYmICFpbml0aWFsLmRlZmVyKVxuICAgICAgICAgIGZzbVtpbml0aWFsLmV2ZW50XSgpO1xuICBcbiAgICAgICAgcmV0dXJuIGZzbTtcbiAgXG4gICAgICB9LFxuICBcbiAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFxuICAgICAgZG9DYWxsYmFjazogZnVuY3Rpb24oZnNtLCBmdW5jLCBuYW1lLCBmcm9tLCB0bywgYXJncykge1xuICAgICAgICBpZiAoZnVuYykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuYy5hcHBseShmc20sIFtuYW1lLCBmcm9tLCB0b10uY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2F0Y2goZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZzbS5lcnJvcihuYW1lLCBmcm9tLCB0bywgYXJncywgU3RhdGVNYWNoaW5lLkVycm9yLklOVkFMSURfQ0FMTEJBQ0ssIFwiYW4gZXhjZXB0aW9uIG9jY3VycmVkIGluIGEgY2FsbGVyLXByb3ZpZGVkIGNhbGxiYWNrIGZ1bmN0aW9uXCIsIGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgXG4gICAgICBiZWZvcmVBbnlFdmVudDogIGZ1bmN0aW9uKGZzbSwgbmFtZSwgZnJvbSwgdG8sIGFyZ3MpIHsgcmV0dXJuIFN0YXRlTWFjaGluZS5kb0NhbGxiYWNrKGZzbSwgZnNtWydvbmJlZm9yZWV2ZW50J10sICAgICAgICAgICAgICAgICAgICAgICBuYW1lLCBmcm9tLCB0bywgYXJncyk7IH0sXG4gICAgICBhZnRlckFueUV2ZW50OiAgIGZ1bmN0aW9uKGZzbSwgbmFtZSwgZnJvbSwgdG8sIGFyZ3MpIHsgcmV0dXJuIFN0YXRlTWFjaGluZS5kb0NhbGxiYWNrKGZzbSwgZnNtWydvbmFmdGVyZXZlbnQnXSB8fCBmc21bJ29uZXZlbnQnXSwgICAgICBuYW1lLCBmcm9tLCB0bywgYXJncyk7IH0sXG4gICAgICBsZWF2ZUFueVN0YXRlOiAgIGZ1bmN0aW9uKGZzbSwgbmFtZSwgZnJvbSwgdG8sIGFyZ3MpIHsgcmV0dXJuIFN0YXRlTWFjaGluZS5kb0NhbGxiYWNrKGZzbSwgZnNtWydvbmxlYXZlc3RhdGUnXSwgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLCBmcm9tLCB0bywgYXJncyk7IH0sXG4gICAgICBlbnRlckFueVN0YXRlOiAgIGZ1bmN0aW9uKGZzbSwgbmFtZSwgZnJvbSwgdG8sIGFyZ3MpIHsgcmV0dXJuIFN0YXRlTWFjaGluZS5kb0NhbGxiYWNrKGZzbSwgZnNtWydvbmVudGVyc3RhdGUnXSB8fCBmc21bJ29uc3RhdGUnXSwgICAgICBuYW1lLCBmcm9tLCB0bywgYXJncyk7IH0sXG4gICAgICBjaGFuZ2VTdGF0ZTogICAgIGZ1bmN0aW9uKGZzbSwgbmFtZSwgZnJvbSwgdG8sIGFyZ3MpIHsgcmV0dXJuIFN0YXRlTWFjaGluZS5kb0NhbGxiYWNrKGZzbSwgZnNtWydvbmNoYW5nZXN0YXRlJ10sICAgICAgICAgICAgICAgICAgICAgICBuYW1lLCBmcm9tLCB0bywgYXJncyk7IH0sXG4gIFxuICAgICAgYmVmb3JlVGhpc0V2ZW50OiBmdW5jdGlvbihmc20sIG5hbWUsIGZyb20sIHRvLCBhcmdzKSB7IHJldHVybiBTdGF0ZU1hY2hpbmUuZG9DYWxsYmFjayhmc20sIGZzbVsnb25iZWZvcmUnICsgbmFtZV0sICAgICAgICAgICAgICAgICAgICAgbmFtZSwgZnJvbSwgdG8sIGFyZ3MpOyB9LFxuICAgICAgYWZ0ZXJUaGlzRXZlbnQ6ICBmdW5jdGlvbihmc20sIG5hbWUsIGZyb20sIHRvLCBhcmdzKSB7IHJldHVybiBTdGF0ZU1hY2hpbmUuZG9DYWxsYmFjayhmc20sIGZzbVsnb25hZnRlcicgICsgbmFtZV0gfHwgZnNtWydvbicgKyBuYW1lXSwgbmFtZSwgZnJvbSwgdG8sIGFyZ3MpOyB9LFxuICAgICAgbGVhdmVUaGlzU3RhdGU6ICBmdW5jdGlvbihmc20sIG5hbWUsIGZyb20sIHRvLCBhcmdzKSB7IHJldHVybiBTdGF0ZU1hY2hpbmUuZG9DYWxsYmFjayhmc20sIGZzbVsnb25sZWF2ZScgICsgZnJvbV0sICAgICAgICAgICAgICAgICAgICAgbmFtZSwgZnJvbSwgdG8sIGFyZ3MpOyB9LFxuICAgICAgZW50ZXJUaGlzU3RhdGU6ICBmdW5jdGlvbihmc20sIG5hbWUsIGZyb20sIHRvLCBhcmdzKSB7IHJldHVybiBTdGF0ZU1hY2hpbmUuZG9DYWxsYmFjayhmc20sIGZzbVsnb25lbnRlcicgICsgdG9dICAgfHwgZnNtWydvbicgKyB0b10sICAgbmFtZSwgZnJvbSwgdG8sIGFyZ3MpOyB9LFxuICBcbiAgICAgIGJlZm9yZUV2ZW50OiBmdW5jdGlvbihmc20sIG5hbWUsIGZyb20sIHRvLCBhcmdzKSB7XG4gICAgICAgIGlmICgoZmFsc2UgPT09IFN0YXRlTWFjaGluZS5iZWZvcmVUaGlzRXZlbnQoZnNtLCBuYW1lLCBmcm9tLCB0bywgYXJncykpIHx8XG4gICAgICAgICAgICAoZmFsc2UgPT09IFN0YXRlTWFjaGluZS5iZWZvcmVBbnlFdmVudCggZnNtLCBuYW1lLCBmcm9tLCB0bywgYXJncykpKVxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0sXG4gIFxuICAgICAgYWZ0ZXJFdmVudDogZnVuY3Rpb24oZnNtLCBuYW1lLCBmcm9tLCB0bywgYXJncykge1xuICAgICAgICBTdGF0ZU1hY2hpbmUuYWZ0ZXJUaGlzRXZlbnQoZnNtLCBuYW1lLCBmcm9tLCB0bywgYXJncyk7XG4gICAgICAgIFN0YXRlTWFjaGluZS5hZnRlckFueUV2ZW50KCBmc20sIG5hbWUsIGZyb20sIHRvLCBhcmdzKTtcbiAgICAgIH0sXG4gIFxuICAgICAgbGVhdmVTdGF0ZTogZnVuY3Rpb24oZnNtLCBuYW1lLCBmcm9tLCB0bywgYXJncykge1xuICAgICAgICB2YXIgc3BlY2lmaWMgPSBTdGF0ZU1hY2hpbmUubGVhdmVUaGlzU3RhdGUoZnNtLCBuYW1lLCBmcm9tLCB0bywgYXJncyksXG4gICAgICAgICAgICBnZW5lcmFsICA9IFN0YXRlTWFjaGluZS5sZWF2ZUFueVN0YXRlKCBmc20sIG5hbWUsIGZyb20sIHRvLCBhcmdzKTtcbiAgICAgICAgaWYgKChmYWxzZSA9PT0gc3BlY2lmaWMpIHx8IChmYWxzZSA9PT0gZ2VuZXJhbCkpXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBlbHNlIGlmICgoU3RhdGVNYWNoaW5lLkFTWU5DID09PSBzcGVjaWZpYykgfHwgKFN0YXRlTWFjaGluZS5BU1lOQyA9PT0gZ2VuZXJhbCkpXG4gICAgICAgICAgcmV0dXJuIFN0YXRlTWFjaGluZS5BU1lOQztcbiAgICAgIH0sXG4gIFxuICAgICAgZW50ZXJTdGF0ZTogZnVuY3Rpb24oZnNtLCBuYW1lLCBmcm9tLCB0bywgYXJncykge1xuICAgICAgICBTdGF0ZU1hY2hpbmUuZW50ZXJUaGlzU3RhdGUoZnNtLCBuYW1lLCBmcm9tLCB0bywgYXJncyk7XG4gICAgICAgIFN0YXRlTWFjaGluZS5lbnRlckFueVN0YXRlKCBmc20sIG5hbWUsIGZyb20sIHRvLCBhcmdzKTtcbiAgICAgIH0sXG4gIFxuICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgXG4gICAgICBidWlsZEV2ZW50OiBmdW5jdGlvbihuYW1lLCBtYXApIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICBcbiAgICAgICAgICB2YXIgZnJvbSAgPSB0aGlzLmN1cnJlbnQ7XG4gICAgICAgICAgdmFyIHRvICAgID0gbWFwW2Zyb21dIHx8IChtYXBbU3RhdGVNYWNoaW5lLldJTERDQVJEXSAhPSBTdGF0ZU1hY2hpbmUuV0lMRENBUkQgPyBtYXBbU3RhdGVNYWNoaW5lLldJTERDQVJEXSA6IGZyb20pIHx8IGZyb207XG4gICAgICAgICAgdmFyIGFyZ3MgID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTsgLy8gdHVybiBhcmd1bWVudHMgaW50byBwdXJlIGFycmF5XG4gIFxuICAgICAgICAgIGlmICh0aGlzLnRyYW5zaXRpb24pXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lcnJvcihuYW1lLCBmcm9tLCB0bywgYXJncywgU3RhdGVNYWNoaW5lLkVycm9yLlBFTkRJTkdfVFJBTlNJVElPTiwgXCJldmVudCBcIiArIG5hbWUgKyBcIiBpbmFwcHJvcHJpYXRlIGJlY2F1c2UgcHJldmlvdXMgdHJhbnNpdGlvbiBkaWQgbm90IGNvbXBsZXRlXCIpO1xuICBcbiAgICAgICAgICBpZiAodGhpcy5jYW5ub3QobmFtZSkpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lcnJvcihuYW1lLCBmcm9tLCB0bywgYXJncywgU3RhdGVNYWNoaW5lLkVycm9yLklOVkFMSURfVFJBTlNJVElPTiwgXCJldmVudCBcIiArIG5hbWUgKyBcIiBpbmFwcHJvcHJpYXRlIGluIGN1cnJlbnQgc3RhdGUgXCIgKyB0aGlzLmN1cnJlbnQpO1xuICBcbiAgICAgICAgICBpZiAoZmFsc2UgPT09IFN0YXRlTWFjaGluZS5iZWZvcmVFdmVudCh0aGlzLCBuYW1lLCBmcm9tLCB0bywgYXJncykpXG4gICAgICAgICAgICByZXR1cm4gU3RhdGVNYWNoaW5lLlJlc3VsdC5DQU5DRUxMRUQ7XG4gIFxuICAgICAgICAgIGlmIChmcm9tID09PSB0bykge1xuICAgICAgICAgICAgU3RhdGVNYWNoaW5lLmFmdGVyRXZlbnQodGhpcywgbmFtZSwgZnJvbSwgdG8sIGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIFN0YXRlTWFjaGluZS5SZXN1bHQuTk9UUkFOU0lUSU9OO1xuICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgLy8gcHJlcGFyZSBhIHRyYW5zaXRpb24gbWV0aG9kIGZvciB1c2UgRUlUSEVSIGxvd2VyIGRvd24sIG9yIGJ5IGNhbGxlciBpZiB0aGV5IHdhbnQgYW4gYXN5bmMgdHJhbnNpdGlvbiAoaW5kaWNhdGVkIGJ5IGFuIEFTWU5DIHJldHVybiB2YWx1ZSBmcm9tIGxlYXZlU3RhdGUpXG4gICAgICAgICAgdmFyIGZzbSA9IHRoaXM7XG4gICAgICAgICAgdGhpcy50cmFuc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBmc20udHJhbnNpdGlvbiA9IG51bGw7IC8vIHRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGV2ZXIgYmUgY2FsbGVkIG9uY2VcbiAgICAgICAgICAgIGZzbS5jdXJyZW50ID0gdG87XG4gICAgICAgICAgICBTdGF0ZU1hY2hpbmUuZW50ZXJTdGF0ZSggZnNtLCBuYW1lLCBmcm9tLCB0bywgYXJncyk7XG4gICAgICAgICAgICBTdGF0ZU1hY2hpbmUuY2hhbmdlU3RhdGUoZnNtLCBuYW1lLCBmcm9tLCB0bywgYXJncyk7XG4gICAgICAgICAgICBTdGF0ZU1hY2hpbmUuYWZ0ZXJFdmVudCggZnNtLCBuYW1lLCBmcm9tLCB0bywgYXJncyk7XG4gICAgICAgICAgICByZXR1cm4gU3RhdGVNYWNoaW5lLlJlc3VsdC5TVUNDRUVERUQ7XG4gICAgICAgICAgfTtcbiAgICAgICAgICB0aGlzLnRyYW5zaXRpb24uY2FuY2VsID0gZnVuY3Rpb24oKSB7IC8vIHByb3ZpZGUgYSB3YXkgZm9yIGNhbGxlciB0byBjYW5jZWwgYXN5bmMgdHJhbnNpdGlvbiBpZiBkZXNpcmVkIChpc3N1ZSAjMjIpXG4gICAgICAgICAgICBmc20udHJhbnNpdGlvbiA9IG51bGw7XG4gICAgICAgICAgICBTdGF0ZU1hY2hpbmUuYWZ0ZXJFdmVudChmc20sIG5hbWUsIGZyb20sIHRvLCBhcmdzKTtcbiAgICAgICAgICB9XG4gIFxuICAgICAgICAgIHZhciBsZWF2ZSA9IFN0YXRlTWFjaGluZS5sZWF2ZVN0YXRlKHRoaXMsIG5hbWUsIGZyb20sIHRvLCBhcmdzKTtcbiAgICAgICAgICBpZiAoZmFsc2UgPT09IGxlYXZlKSB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb24gPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIFN0YXRlTWFjaGluZS5SZXN1bHQuQ0FOQ0VMTEVEO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChTdGF0ZU1hY2hpbmUuQVNZTkMgPT09IGxlYXZlKSB7XG4gICAgICAgICAgICByZXR1cm4gU3RhdGVNYWNoaW5lLlJlc3VsdC5QRU5ESU5HO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRyYW5zaXRpb24pIC8vIG5lZWQgdG8gY2hlY2sgaW4gY2FzZSB1c2VyIG1hbnVhbGx5IGNhbGxlZCB0cmFuc2l0aW9uKCkgYnV0IGZvcmdvdCB0byByZXR1cm4gU3RhdGVNYWNoaW5lLkFTWU5DXG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zaXRpb24oKTtcbiAgICAgICAgICB9XG4gIFxuICAgICAgICB9O1xuICAgICAgfVxuICBcbiAgICB9OyAvLyBTdGF0ZU1hY2hpbmVcbiAgXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgXG4gICAgLy89PT09PT1cbiAgICAvLyBOT0RFXG4gICAgLy89PT09PT1cbiAgICBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gU3RhdGVNYWNoaW5lO1xuICAgICAgfVxuICAgICAgZXhwb3J0cy5TdGF0ZU1hY2hpbmUgPSBTdGF0ZU1hY2hpbmU7XG4gICAgfVxuICAgIC8vPT09PT09PT09PT09XG4gICAgLy8gQU1EL1JFUVVJUkVcbiAgICAvLz09PT09PT09PT09PVxuICAgIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgZGVmaW5lKGZ1bmN0aW9uKHJlcXVpcmUpIHsgcmV0dXJuIFN0YXRlTWFjaGluZTsgfSk7XG4gICAgfVxuICAgIC8vPT09PT09PT1cbiAgICAvLyBCUk9XU0VSXG4gICAgLy89PT09PT09PVxuICAgIGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB3aW5kb3cuU3RhdGVNYWNoaW5lID0gU3RhdGVNYWNoaW5lO1xuICAgIH1cbiAgICAvLz09PT09PT09PT09XG4gICAgLy8gV0VCIFdPUktFUlxuICAgIC8vPT09PT09PT09PT1cbiAgICBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHNlbGYuU3RhdGVNYWNoaW5lID0gU3RhdGVNYWNoaW5lO1xuICAgIH1cbiAgXG4gIH0oKSk7Il19
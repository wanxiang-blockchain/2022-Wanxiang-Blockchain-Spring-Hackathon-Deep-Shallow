{"version":3,"sources":["assets/Script/Scene/Scene.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Game from \"../Logic/Game\";\nimport AdapterMgr, { AdapterType } from \"../UIFrame/AdapterMgr\";\nimport { EventCenter } from \"../UIFrame/EventCenter\";\nimport { EventType } from \"../UIFrame/EventType\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Scene extends cc.Component {\n\n    public static inst: Scene = null;\n    private ndBlock: cc.Node = null;\n    onLoad() {\n        this.initBlockNode();\n    }\n\n    public initBlockNode() {\n        this.ndBlock = new cc.Node(\"block\");\n        this.ndBlock.addComponent(cc.BlockInputEvents);\n        this.node.addChild(this.ndBlock, cc.macro.MAX_ZINDEX);\n    }\n\n    public async start() {\n        Scene.inst = this;\n        AdapterMgr.inst.adapteByType(AdapterType.StretchHeight | AdapterType.StretchWidth, this.node);\n        await this.onGameInit();\n        this.registerEvent();\n    }\n    /** 游戏初始化 */\n    public async onGameInit() {\n        // 第一步 展示loading页面，当然有些默认就是loading页面\n\n        // 第二步 初始化游戏（Managers，Configs，SDKs）\n        await Game.init(this.node);\n        // 第三步 构建初始场景（加载必要的prefab，音频，texture）\n\n        // 第四步 加载主界面UI,关掉loading页面,正式进入游戏\n\n    }\n    /** 初始化事件 */\n    private registerEvent() {\n        if(cc.sys.platform === cc.sys.WECHAT_GAME) {\n            wx.onShow(this.onGameShow.bind(this));\n            wx.onHide(this.onGameHide.bind(this));\n        }else {\n            cc.game.on(cc.game.EVENT_SHOW, this.onGameShow, this);\n            cc.game.on(cc.game.EVENT_HIDE, this.onGameHide, this);\n        }\n    }\n\n    private onGameShow(param: any) {\n        EventCenter.emit(EventType.GameShow, param);\n        cc.director.resume()\n    }\n    private onGameHide() {\n        EventCenter.emit(EventType.GameHide);\n        cc.director.pause();\n    }\n\n    public update(dt: number) {\n        Game.update(dt);\n    }\n\n    public lateUpdate() {\n\n    }\n\n    /** 设置是否阻挡游戏触摸输入 */\n    private _block = 0;\n    public setInputBlock(bool: boolean) {\n        if(!this.ndBlock) {\n            cc.warn(\"未启用 block input\");\n            return ;\n        }\n        bool ? ++ this._block : -- this._block;\n        this.ndBlock.active = this._block > 0;\n    }\n}"]}
{"version":3,"sources":["assets/Script/Common/Utils/CommonUtils.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import CocosHelper from \"../../UIFrame/CocosHelper\";\nimport { MathUtils } from \"./MatchUtils\";\n\nexport interface TypeConstructor<T> {\n    new():T;\n}\n\nexport interface IRandomGenerator {\n    nextInt(start:number, endAndNotIncluded:number) : number;\n    next01():number;\n}\n\nlet kDefaultRandomGenerator = {\n    nextInt(start:number, endAndNotIncluded:number) : number {\n        return Math.floor(Math.random() * (endAndNotIncluded - start)) + start;\n    },\n    next01() : number {\n        return Math.random();\n    }\n};\n\nexport class CommonUtils {\n    public static isArray(target:any) : boolean {\n        if (typeof Array.isArray === \"function\") {\n            return Array.isArray(target);\n        }else{\n            return Object.prototype.toString.call(target) === \"[object Array]\";\n        }\n    }\n\n    public static foramtDate(dateObj:Date, format:string) {\n        var date : any = {\n            \"M+\": dateObj.getMonth() + 1,\n            \"d+\": dateObj.getDate(),\n            \"h+\": dateObj.getHours(),\n            \"m+\": dateObj.getMinutes(),\n            \"s+\": dateObj.getSeconds(),\n            \"q+\": Math.floor((dateObj.getMonth() + 3) / 3),\n            \"S+\": dateObj.getMilliseconds()\n        };\n        if (/(y+)/i.test(format)) {\n            format = format.replace(RegExp.$1, (dateObj.getFullYear() + '').substr(4 - RegExp.$1.length));\n        }\n        for (var k in date) {\n            if (new RegExp(\"(\" + k + \")\").test(format)) {\n                    format = format.replace(RegExp.$1, (\"00\" + date[k]).substr((\"\" + date[k]).length));\n            }\n        }\n        return format;\n    }\n\n    public static getElemClamped<T>(arr:T[], index:number) : T {\n        return arr[Math.max(0, Math.min(arr.length - 1, index))];\n    }\n\n    public static randomIntClosedRange(min:number, max:number) : number {            //random integer in [min,max]\n        return Math.floor(Math.random() * (max - min + 0.9999) + min);\n    }\n\n    public static indexOf<T>(val:T, arr:T[]) : number {\n        for(let i = 0; i < arr.length; i++) {\n            if(arr[i] == val) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n    public static indexOfArr<T>(arr:T[], ...values:T[]) : number {\n        let paramCount = values.length;\n        let found = false;\n        for(let i = 0; i <= arr.length - paramCount; i+=paramCount) {\n            found = true;\n            for(let j = 0; j < paramCount; j++) {\n                if(arr[i + j] !== values[j]) {\n                    found = false;\n                    break;\n                }\n            }\n            if(found) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n    public static floatEqual(left:number, right:number, epsilon:number = 0.000001) : boolean {\n        return Math.abs(left - right) < epsilon;\n    }\n\n    public static formatTimeInterval(seconds:number, alwaysShowMinutes:boolean = false, alwaysShowHours:boolean = false) {\n        alwaysShowMinutes = alwaysShowHours || alwaysShowMinutes;\n        let ret = \"\";\n        let hour = Math.floor(seconds / 3600);\n        seconds = seconds % 3600;\n        let minute = Math.floor(seconds / 60);\n        seconds = Math.floor(seconds % 60);\n        if(alwaysShowHours || hour > 0) {\n            if(hour < 10) {\n                ret += \"0\";\n            }\n            ret += hour + \":\";\n        }\n        if(alwaysShowMinutes || minute > 0 || hour > 0) {\n            if(minute < 10) {\n                ret += \"0\";\n            }\n            ret += minute + \":\";\n        }\n        if(seconds < 10) {\n            ret += \"0\";\n        }\n        ret += seconds;\n        return ret;\n    }\n\n    public static alignNumber(input:number, divider:number) : number {\n        input = input - Math.floor(input / divider) * divider;\n        return input;\n    }\n\n    public static formatNumber(num:number) {\n        var str = \"\" + Math.floor(num);\n        var newStr = \"\";\n        var count = 0;\n        // 当数字是整数\n        if (str.indexOf(\".\") == -1) {\n            for (var i = str.length - 1; i >= 0; i--) {\n                if (count % 3 == 0 && count != 0) {\n                    newStr = str.charAt(i) + \",\" + newStr;\n                } else {\n                    newStr = str.charAt(i) + newStr;\n                }\n                count++;\n            }\n            str = newStr;\n            return str;\n        }\n        // 当数字带有小数\n        else {\n            for (var i = str.indexOf(\".\") - 1; i >= 0; i--) {\n                if (count % 3 == 0 && count != 0) {\n                    newStr = str.charAt(i) + \",\" + newStr;\n                } else {\n                    newStr = str.charAt(i) + newStr; //逐个字符相接起来\n                }\n                count++;\n            }\n            str = newStr + (str + \"00\").substr((str + \"00\").indexOf(\".\"), 3);\n            return str;\n        }\n    }\n\n    public static updateLabelSize(label:cc.Label) {\n        label[\"_updateRenderData\"](true);\n    }\n\n    public static lerp(begin:number, end:number, factor:number) {\n        return begin + (end - begin) * factor;\n    }\n\n    public static shuffle(container:any[], randGenerator:IRandomGenerator = kDefaultRandomGenerator, start:number = 0, count:number = -1):void {\n        randGenerator = randGenerator || kDefaultRandomGenerator;\n        if(count < 0) {\n            count = container.length - start;\n        }\n        for(let i = 0; i < count; i++) {\n            let idx = randGenerator.nextInt(start, start + count - i);\n            let temp = container[idx];\n            container[idx] = container[count - i - 1 + start];\n            container[count - i - 1 + start] = temp;\n        }\n    }\n\n    public static setItemSpriteFrame(sprite:cc.Sprite, url:string, successCB:(sprite:cc.Sprite)=>void = null) {\n        sprite[\"spriteFrameName\"] = url;\n        CocosHelper.loadResSync(url, cc.SpriteFrame).then((spriteFrame:cc.SpriteFrame)=>{\n            if(sprite.isValid && sprite[\"spriteFrameName\"] == url) {\n                sprite.spriteFrame = spriteFrame;\n                if(successCB) {\n                    successCB(sprite);\n                }\n            }\n        });\n    }\n\n    public static addSimpleClick(target:cc.Node, cb:()=>void) {\n        let targetNode = target;\n        let lastTouchPos : cc.Vec2 = null;\n        targetNode.on(cc.Node.EventType.TOUCH_START, (e:cc.Event.EventTouch)=>{\n            lastTouchPos = e.getLocation();\n        }, this);\n        targetNode.on(cc.Node.EventType.TOUCH_END, (e:cc.Event.EventTouch)=>{\n            if(lastTouchPos) {\n                let delta = lastTouchPos.subSelf(e.getLocation()).mag();\n                if(delta < 3) {\n                    cb();\n                }\n            }\n        }, this);\n    }\n\n    public static isGoodNumber(num:any) {\n        return (typeof num) === \"number\" && !Number.isNaN(num);\n    }\n\n    public static getVisibleRect() {\n        let visibleRect = cc.view.getViewportRect();\n        visibleRect = cc.rect(visibleRect.origin.x / -cc.view.getScaleX(), visibleRect.origin.y / -cc.view.getScaleY(), \n        (visibleRect.size.width + visibleRect.origin.x * 2) / cc.view.getScaleX(), (visibleRect.size.height + visibleRect.origin.y * 2) / cc.view.getScaleY());\n        return visibleRect;\n    }\n\n    public static httpGet(url:string, cb: Function) {\n        let xhr = cc.loader.getXMLHttpRequest();\n        xhr.onreadystatechange = function () {\n            // cc.log(\"Get: readyState:\" + xhr.readyState + \" status:\" + xhr.status);\n            if (xhr.readyState === 4 && xhr.status == 200) {\n                let respone = xhr.responseText;\n                let rsp = JSON.parse(respone);\n                cb(rsp);\n            } else if (xhr.readyState === 4 && xhr.status == 401) {\n                cb({\"ret\":1});\n            } else {\n                //callback(-1);\n            }\n        };\n        xhr.withCredentials = true;\n        xhr.open('GET', url, true);\n        xhr.withCredentials = false;\n        // if (cc.sys.isNative) {\n        xhr.setRequestHeader('Access-Control-Allow-Origin', '*');\n        xhr.setRequestHeader('Access-Control-Allow-Methods', 'GET, POST');\n        xhr.setRequestHeader('Access-Control-Allow-Headers', 'x-requested-with,content-type,authorization');\n        xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n        //xhr.setRequestHeader('Authorization', 'Bearer ' + cc.myGame.gameManager.getToken());\n        // xhr.setRequestHeader('Authorization', 'Bearer ' + \"\");\n        // }\n\n        // note: In Internet Explorer, the timeout property may be set only after calling the open()\n        // method and before calling the send() method.\n        xhr.timeout = 8000;// 8 seconds for timeout\n\n        xhr.send();\n    }\n\n    /**\n     * Box-Muller algorithm\n     * @param avg \n     */\n    public static randomGaussian(avg:number, variant:number, randGenerator:IRandomGenerator = kDefaultRandomGenerator) : number {\n        randGenerator = randGenerator || kDefaultRandomGenerator;\n        let x1 = randGenerator.next01();\n        let x2 = randGenerator.next01();\n        let standard = Math.sqrt(-2 * Math.log(x1)) * Math.cos(2 * Math.PI * x2);\n        return standard * variant + avg;\n    }\n\n    public static deepCopy(dst:Object, src:Object) {\n        for(let field in src) {\n            this._deepCopyFields(dst, src, field);\n        }\n    }\n\n    public static constructObjectMap(obj: any): Map<string, any> {\n        let map = new Map();\n        for(let key in obj) {\n            let val = obj[key]\n            if(typeof val === \"object\") {\n                map.set(key, this.constructObjectMap(val));\n            } else {\n                map.set(key, val);\n            }\n        }\n        return map\n    }\n\n    private static _deepCopyFields(dst:Object, src:Object, field:any) {\n        let value = src[field];\n        if(typeof value == \"number\" || typeof value == \"string\") {\n            dst[field] = value;\n        } else if(this.isArray[value]) {\n            let dstArr = dst[field] = [];\n            for(let i = 0; i < value.length; i++) {\n                this._deepCopyFields(dstArr, value, i);\n            }\n        } else if(value == null) {\n            dst[field] = null;\n        } else if(typeof value == \"object\") {\n            let dstObj = new value.constructor();\n            for(let field in src) {\n                this._deepCopyFields(dstObj, value, field);\n            }\n        }\n    }\n\n    static unitArr: Array<string> = [\"\", \"K\", \"M\", \"B\"];\n    static constNum: number = 3;\n\n    /**\n     * 格式化数字变成K,M,B\n     * @param value \n     */\n    static formatNumberToEng(value: number): string {\n        if (value < 1 && value > 0) {\n            return 1 + \"\";\n        }\n        value = Math.floor(value);\n        var exp = Math.floor(CommonUtils.getExponent(value));\n        if (exp < 13) {\n            if (exp < 4) {\n                return value + \"\";\n            }\n\n            var unitIt = Math.floor(exp / CommonUtils.constNum);\n            var rem = exp % CommonUtils.constNum;\n            var numStr = String(value / Math.pow(10, unitIt * CommonUtils.constNum)).substr(0, CommonUtils.constNum + rem);\n            return numStr + CommonUtils.getUnit(exp);\n        } else {\n            var _num = value / Math.pow(10, exp);\n            return _num.toFixed(3) + \"e\" + exp;\n        }\n    }\n\n    private static getExponent(value) {\n        var exp = 0;\n        while (value >= 10) {\n            exp++;\n            value /= 10;\n        }\n        return exp;\n    }\n\n    private static getUnit(exp: number): string {\n        var unitIt = Math.floor(exp / CommonUtils.constNum);\n        if (exp < 13) {\n            return CommonUtils.unitArr[unitIt];\n        } else {\n            var unitIt = Math.floor(exp / CommonUtils.constNum);\n            return \"e\" + unitIt * CommonUtils.constNum;\n        }\n    }\n\n    /**\n     * 转化成带有小数点的K,M,B\n     * @param number \n     * @param decimals \n     */\n    static formatEngNumber(number: any, decimals: number = 2): string {\n        var str: string;\n        var num: number;\n        number = <number><any>number;\n\n        if (number >= 1000000) {\n            num = number / 1000000;\n            str = (Math.floor(num / 0.001) * 0.001).toFixed(decimals);\n            return this.formatEndingZero(str) + \"M\";\n        } else if (number >= 1000) {\n            num = number / 1000;\n            str = (Math.floor(num / 0.001) * 0.001).toFixed(decimals);\n            return this.formatEndingZero(str) + \"K\";\n        } else {\n            return number + \"\";\n        }\n    }\n\n    static formatEndingZero(c: string): string {\n        if (c.indexOf(\".\") != -1) {\n            if (this.endWith(c, \"00\")) {\n                return c.substring(0, c.length - 3);\n            } else if (this.endWith(c, \"0\")) {\n                return c.substring(0, c.length - 1);\n            }\n        }\n\n        return c;\n    }\n\n    static endWith(c: string, suffix: string): boolean {\n        return (suffix == c.substring(c.length - suffix.length));\n    }\n\n    static makeMaxWidthLabel(label: cc.Label,width:number) : cc.Label {\n        let obj = {};\n        obj[\"__proto__\"] = label;\n        Object.defineProperty(obj, \"string\", {\n            configurable:true,\n            enumerable:true,\n            get() {\n                return label.string;\n            },\n            set(str) {\n                label.overflow = cc.Label.Overflow.NONE;\n                label.string = str;\n                label[\"_updateRenderData\"](true);\n                if(label.node.width > width) {\n                    label.overflow = cc.Label.Overflow.RESIZE_HEIGHT;\n                    label.node.setContentSize(width, 1);\n                    label.string = str;\n                }\n            }\n        });\n        return <cc.Label>obj;\n    }\n\n    public static climeUserName(name: string, showLen = 14) {\n        let len = name.length;\n        while (this.strlen(name) > showLen) {\n            name = name.substring(0, name.length - 1);\n        }\n        if (name.length != len) {\n            name = name + \"...\"\n        }\n        return name;\n    }\n\n    private static strlen(str) {\n        let len = 0;\n        for (let i = 0; i < str.length; i++) {\n          let c = str.charCodeAt(i);\n          //单字节加1 \n          if ((c >= 0x0001 && c <= 0x007e) || (0xff60 <= c && c <= 0xff9f)) {\n            len++;\n          } else {\n            len += 2;\n          }\n        }\n        return len;\n    }\n\n    /** 打乱数组 */\n    public static shuffleArr(arr: any[]) {\n        let _swap = (a: number, b: number) => {\n            let tmp = arr[a];\n            arr[a] = arr[b];\n            arr[b] = tmp;\n        }\n        let len = arr.length;\n        for(let i=0; i<len; i++) {\n            let idx = Math.floor(Math.random() * (len - i));\n            _swap(idx, len-i-1);\n        }\n        return arr;\n    }\n    \n    /** 二分查找, findFlag 为false表示没找到的时候返回一个较小的, 为true返回一个较大的 */\n    public static binarySearch(arr: number[], target: number, findFlag = false) {\n        let start = 0, end = arr.length-1;\n        while(end-start > 1){\n            var idx = Math.floor((start + end) / 2);\n            if (target < arr[idx]) {\n                end = idx;\n            } else if (target > arr[idx]) {\n                   start = idx\n            } else {\n                return idx;\n            }\n        }\n        // 没有找到对应的值\n        if(!findFlag) {\n            if(end == 0) return -1;\n            return start;\n        }else {\n            if(start == arr.length-1) return arr.length;\n            return end;\n        }\n    }\n\n    // 判断一个点是否在三角形内\n    public static isInTriangle(point: cc.Vec2, triA: cc.Vec2, triB: cc.Vec2, triC: cc.Vec2) {\n        let AB = triB.sub(triA), AC = triC.sub(triA), BC = triC.sub(triB), AD = point.sub(triA), BD = point.sub(triB);\n        //@ts-ignore\n        return (AB.cross(AC) >= 0 ^ AB.cross(AD) < 0)  && (AB.cross(AC) >= 0 ^ AC.cross(AD) >= 0) && (BC.cross(AB) > 0 ^ BC.cross(BD) >= 0); \n    }\n\n    public static isInPolygon(checkPoint: cc.Vec2, polygonPoints: cc.Vec2[]) {\n        let counter = 0, i: number, xinters: number;\n        let p1: cc.Vec2, p2: cc.Vec2;\n        let pointCount = polygonPoints.length;\n        p1 = polygonPoints[0];\n     \n        for (i = 1; i <= pointCount; i++) {\n            p2 = polygonPoints[i % pointCount];\n            if (\n                checkPoint.x > Math.min(p1.x, p2.x) &&\n                checkPoint.x <= Math.max(p1.x, p2.x)\n            ) {\n                if (checkPoint.y <= Math.max(p1.y, p2.y)) {\n                    if (p1.x != p2.x) {\n                        xinters = (checkPoint.x - p1.x) * (p2.y - p1.y) / (p2.x - p1.x) + p1.y;\n                        if (p1.y == p2.y || checkPoint.y <= xinters) {\n                            counter++;\n                        }\n                    }\n                }\n            }\n            p1 = p2;\n        }\n        return (counter & 1) !== 0;\n    }\n\n    // 多边形 三角切割\n    public static splitePolygon(points: cc.Vec2[]): number[] {\n        if(points.length <= 3) return [0, 1, 2];\n        let pointMap: {[key: string]: number} = {};     // point与idx的映射\n        for(let i=0; i<points.length; i++) {\n            let p = points[i];\n            pointMap[`${p.x}-${p.y}`] = i;\n        }\n        const getIdx = (p: cc.Vec2) => {\n            return pointMap[`${p.x}-${p.y}`]\n        }\n        points = points.concat([]);\n        let idxs: number[] = [];\n\n        let index = 0;\n        while(points.length > 3) {\n            let p1 = points[(index) % points.length]\n            , p2 = points[(index+1) % points.length]\n            , p3 = points[(index+2) % points.length];\n            let splitPoint = (index+1) % points.length;\n\n            let v1 = p2.sub(p1);\n            let v2 = p3.sub(p2);\n            if(v1.cross(v2) < 0) {      // 是一个凹角, 寻找下一个\n                index = (index + 1) % points.length;\n                continue;\n            }\n            let hasPoint = false;       \n            for(const p of points) {\n                if(p != p1 && p != p2 && p != p3 && this.isInTriangle(p, p1, p2 ,p3)) {\n                    hasPoint = true;\n                    break;\n                }\n            }\n            if(hasPoint) {      // 当前三角形包含其他点, 寻找下一个\n                index = (index + 1) % points.length;\n                continue;\n            }\n            // 找到了耳朵, 切掉\n            idxs.push(getIdx(p1), getIdx(p2), getIdx(p3));\n            points.splice(splitPoint, 1);\n        }\n        for(const p of points) {\n            idxs.push(getIdx(p));\n        }\n        return idxs;\n    }\n\n    /** 计算uv, 锚点都是中心 */\n    public static computeUv(points: cc.Vec2[], width: number, height: number) {\n        let uvs: cc.Vec2[] = [];\n        for(const p of points) {\n            // uv原点是左上角\n            let x = MathUtils.clamp(0, 1, (p.x + width/2) / width);\n            let y = MathUtils.clamp(0, 1, 1. - (p.y + height/2) / height);\n            uvs.push(cc.v2(x, y));\n        }\n        return uvs;\n    }\n\n    public static tweenFloat(from: number, to: number, duration: number, onUpdate: (t: number) => void, onComplete?: Function, autoStart: boolean = true) {\n        let o: Record<string, number> = { _value: from };\n        Object.defineProperty(o, 'value', {\n            get: () => o._value,\n            set: (v: number) => { o._value = v; onUpdate && onUpdate(o._value); },\n        });\n        let tween = cc.tween(o).to(duration, { value: to }).call(onComplete);\n        if (autoStart) {\n            tween.start();\n        }\n        return tween;\n    }\n\n    public static tweenVec2(from: cc.Vec2, to: cc.Vec2, duration: number, onUpdate: (t: cc.Vec2) => void, onComplete?: Function, autoStart: boolean = true) {\n        let o: Record<string, cc.Vec2> = {_value: from};\n        Object.defineProperty(o, 'value', {\n            get: () => o._value,\n            set: (v: cc.Vec2) => { o._value = v; onUpdate && onUpdate(o._value); },\n        });\n        let tween = cc.tween(o).to(duration, { value: to }).call(onComplete);\n        if (autoStart) {\n            tween.start();\n        }\n        return tween;\n    }\n\n    \n    \n}"]}